"use strict";(self.webpackChunksalat_e_mustaqeem_client=self.webpackChunksalat_e_mustaqeem_client||[]).push([[718],{1718:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var n=t(5043),r=t(8903),i=t(2703),s=t(5865),l=t(3336),o=t(4194),d=t(1906),h=t(5381),c=t(1637),m=t(4669),x=t(4056),y=t(7392),j=t(7784),A=t(6171),u=t(5396),b=t(6240),g=t(2110),v=t(6494),p=t(9336),f=t(7739),w=t(3845),S=t(5896),C=t(1707),D=t(2090),k=t(579);const I=["Su","Mo","Tu","We","Th","Fr","Sa"],T=()=>{const e=(0,b.A)(),{hijriDate:a,prayerTimesService:t}=(0,A.xn)(),[l,o]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[c,m]=(0,n.useState)([]),[x,j]=(0,n.useState)([]),[u,T]=(0,n.useState)(null);(0,n.useEffect)((()=>{a&&(o(a.month.number),h(a.year),T(a),P(a.month.number,a.year),M(a.year))}),[a]);const P=(e,a)=>{try{const n=(e,a)=>{const t=[2,5,7,10,13,16,18,21,24,26,29].includes(a%30);return e%2===1||12===e&&t?30:29},r=null!==t&&void 0!==t&&t.getHijriCalendar?t.getHijriCalendar(e,a).daysInMonth:n(e,a),i=(e+a)%7,s=[];let l=1;for(let t=0;t<6;t++){const n=[];for(let s=0;s<7;s++)0===t&&s<i||l>r?n.push(null):(n.push({day:l,isToday:F(l,e,a),events:W(l,e,a)}),l++);if(s.push(n),l>r)break}m(s)}catch(n){console.error("Error loading Hijri calendar data:",n)}},M=e=>{try{j([{name:"Islamic New Year",month:1,day:1},{name:"Day of Ashura",month:1,day:10},{name:"Mawlid al-Nabi",month:3,day:12},{name:"Laylat al-Miraj",month:7,day:27},{name:"Laylat al-Bara'at",month:8,day:15},{name:"Start of Ramadan",month:9,day:1},{name:"Laylat al-Qadr",month:9,day:27},{name:"Eid al-Fitr",month:10,day:1},{name:"Day of Arafah",month:12,day:9},{name:"Eid al-Adha",month:12,day:10}])}catch(a){console.error("Error loading Islamic events:",a)}},F=(e,t,n)=>a&&a.day===e&&a.month.number===t&&a.year===parseInt(n),W=(e,a,t)=>x.filter((t=>t.day===e&&t.month===a)),$=e=>["Muharram","Safar","Rabi al-Awwal","Rabi al-Thani","Jumada al-Awwal","Jumada al-Thani","Rajab","Shaban","Ramadan","Shawwal","Dhu al-Qadah","Dhu al-Hijjah"][e-1];return a&&l&&d?(0,k.jsx)(g.A,{sx:{mb:4,borderRadius:2,boxShadow:3},children:(0,k.jsxs)(v.A,{children:[(0,k.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Islamic Calendar"}),(0,k.jsxs)(i.A,{sx:{mb:3,textAlign:"center"},children:[(0,k.jsxs)(s.A,{variant:"h5",gutterBottom:!0,sx:{color:e.palette.secondary.main,fontWeight:"bold"},children:[u.day," ",u.month.en," ",u.year," AH"]}),(0,k.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:["Corresponding to ",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,k.jsx)(p.A,{sx:{mb:3}}),(0,k.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,k.jsx)(y.A,{onClick:()=>{let e=l-1,a=d;e<1&&(e=12,a--),o(e),h(a),P(e,a)},children:(0,k.jsx)(S.A,{})}),(0,k.jsxs)(s.A,{variant:"h6",children:[$(l)," ",d," AH"]}),(0,k.jsx)(y.A,{onClick:()=>{let e=l+1,a=d;e>12&&(e=1,a++),o(e),h(a),P(e,a)},children:(0,k.jsx)(C.A,{})})]}),(0,k.jsx)(i.A,{sx:{mb:3},children:(0,k.jsxs)(r.Ay,{container:!0,children:[I.map(((e,a)=>(0,k.jsx)(r.Ay,{item:!0,xs:12/7,sx:{py:1,textAlign:"center",fontWeight:"medium",bgcolor:5===a?"rgba(76, 175, 80, 0.1)":"transparent"},children:(0,k.jsx)(s.A,{variant:"body2",sx:{fontWeight:5===a?"bold":"inherit"},children:e})},e))),c.map(((a,t)=>(0,k.jsx)(n.Fragment,{children:a.map(((a,n)=>(0,k.jsx)(r.Ay,{item:!0,xs:12/7,sx:{height:50,p:.5,border:"1px solid",borderColor:"divider"},children:a&&(0,k.jsxs)(i.A,{sx:{height:"100%",p:.5,borderRadius:1,bgcolor:a.isToday?e.palette.primary.main:"transparent",color:a.isToday?"white":"inherit",position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,k.jsx)(s.A,{variant:"body2",children:a.day}),a.events&&a.events.length>0&&(0,k.jsx)(f.A,{title:a.events.map((e=>e.name)).join(", "),children:(0,k.jsx)(i.A,{sx:{width:"60%",height:4,borderRadius:2,bgcolor:a.isToday?"rgba(255,255,255,0.7)":e.palette.secondary.main,mt:"auto"}})})]})},`day-${t}-${n}`)))},`week-${t}`)))]})}),(0,k.jsx)(p.A,{sx:{mb:3}}),(0,k.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"medium"},children:"Important Islamic Dates"}),(0,k.jsx)(i.A,{sx:{mb:2},children:(0,k.jsx)(r.Ay,{container:!0,spacing:1,children:x.map((e=>(0,k.jsx)(r.Ay,{item:!0,children:(0,k.jsx)(w.A,{icon:(0,k.jsx)(D.A,{}),label:`${e.name} (${e.day} ${$(e.month)})`,color:e.month===l?"primary":"default",variant:e.month===l?"filled":"outlined",size:"small",sx:{mb:1}})},`${e.month}-${e.day}-${e.name}`)))})})]})}):(0,k.jsx)(g.A,{sx:{mb:4,borderRadius:2,boxShadow:3},children:(0,k.jsxs)(v.A,{children:[(0,k.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"Islamic Calendar"}),(0,k.jsx)(i.A,{sx:{p:3,textAlign:"center"},children:(0,k.jsx)(s.A,{children:"Loading Hijri calendar..."})})]})})};var P=t(5722),M=t(7707),F=t(6658),W=t(4448),$=t(8035),B=t(7378),L=t(931),R=t(8390),Y=t(6327);const N=()=>{var e,a,t;const[b,g]=(0,n.useState)(!1),[v,p]=(0,n.useState)(null),[f,w]=(0,n.useState)(null),[S,C]=(0,n.useState)((new Date).getMonth()+1),[D,I]=(0,n.useState)((new Date).getFullYear()),[N,H]=(0,n.useState)(0),[E,_]=(0,n.useState)("month"),{params:V}=(0,A.xn)(),z=e=>{e<1?(I(D-1),C(12)):e>12?(I(D+1),C(1)):C(e)};(0,n.useEffect)((()=>{(async()=>{if(V.latitude&&V.longitude){g(!0),p(null);try{const a={latitude:V.latitude,longitude:V.longitude,method:V.method,school:V.school,latitudeAdjustmentMethod:V.latitudeAdjustmentMethod,midnightMode:V.midnightMode};let t;try{if(t="month"===E?await u.A.getMonthlyPrayerTimes(D,S,a):await u.A.getYearlyPrayerTimes(D,a),200===t.code)if("month"===E){const e={viewType:"month",months:{gregorian:{name:t.data.monthName||new Date(D,S-1,1).toLocaleString("default",{month:"long"}),number:t.data.month},hijri:{name:"Islamic Calendar",number:""}},days:t.data.days||[],meta:t.data.meta||{}};w(e)}else{const e={viewType:"year",year:t.data.year,months:t.data.months||[],meta:t.data.meta||{}};w(e)}else console.warn("API returned non-200 status:",t.status),w({viewType:E,months:{gregorian:{name:new Date(D,S-1,1).toLocaleString("default",{month:"long"}),number:S},hijri:{name:"Calendar View",number:""}}})}catch(e){console.error("Calendar API error:",e),w({viewType:E,months:{gregorian:{name:new Date(D,S-1,1).toLocaleString("default",{month:"long"}),number:S},hijri:{name:"Calendar View",number:""}}})}}catch(a){p(a.message||"An error occurred while fetching calendar data"),console.error(a)}finally{g(!1)}}})()}),[V,S,D,E]);const q=e=>{var a;return e.timings?(0,k.jsxs)(r.Ay,{container:!0,alignItems:"center",children:[(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,k.jsx)(s.A,{variant:"body1",fontWeight:"medium",children:new Date(e.date).getDate()}),(0,k.jsx)(s.A,{variant:"caption",color:"text.secondary",children:e.weekday}),e.hijri&&(0,k.jsxs)(s.A,{variant:"caption",color:"text.secondary",children:[e.hijri.day," ",null===(a=e.hijri.month)||void 0===a?void 0:a.en]})]})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"body2",children:e.timings.Fajr})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"body2",children:e.timings.Sunrise})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"body2",children:e.timings.Dhuhr})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"body2",children:e.timings.Asr})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"body2",children:e.timings.Maghrib})})]}):null};return b?(0,k.jsxs)(h.A,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:[(0,k.jsx)(c.A,{size:60}),(0,k.jsx)(s.A,{variant:"h6",sx:{mt:2,color:"text.secondary"},children:"Loading calendar data..."})]}):(0,k.jsxs)(h.A,{maxWidth:"lg",sx:{py:4},children:[(0,k.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:4,color:"primary.main",fontWeight:500},children:"Islamic Calendar"}),v&&(0,k.jsx)(o.A,{severity:"error",sx:{mb:3},children:v}),!V.latitude&&!V.longitude&&(0,k.jsxs)(l.A,{sx:{p:4,textAlign:"center"},children:[(0,k.jsx)(s.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"Please set your location first"}),(0,k.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Go to the Prayer Times page to set your location and calculation method."})]}),V.latitude&&V.longitude&&(0,k.jsxs)(i.A,{sx:{width:"100%"},children:[(0,k.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,k.jsxs)(m.A,{value:N,onChange:(e,a)=>{H(a)},"aria-label":"calendar tabs",centered:!0,children:[(0,k.jsx)(x.A,{icon:(0,k.jsx)(M.A,{}),iconPosition:"start",label:"Hijri Calendar",id:"tab-0","aria-controls":"tabpanel-0"}),(0,k.jsx)(x.A,{icon:(0,k.jsx)(P.A,{}),iconPosition:"start",label:"Prayer Times Calendar",id:"tab-1","aria-controls":"tabpanel-1"})]})}),(0,k.jsx)(i.A,{role:"tabpanel",hidden:0!==N,id:"tabpanel-0","aria-labelledby":"tab-0",children:0===N&&(0,k.jsx)(T,{})}),(0,k.jsx)(i.A,{role:"tabpanel",hidden:1!==N,id:"tabpanel-1","aria-labelledby":"tab-1",children:1===N&&(0,k.jsxs)(i.A,{children:[(0,k.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,k.jsxs)(i.A,{children:[(0,k.jsx)(d.A,{variant:"month"===E?"contained":"outlined",onClick:()=>_("month"),startIcon:(0,k.jsx)(P.A,{}),sx:{mr:1},children:"Month"}),(0,k.jsx)(d.A,{variant:"year"===E?"contained":"outlined",onClick:()=>_("year"),startIcon:(0,k.jsx)(B.A,{}),children:"Year"})]}),(0,k.jsx)(i.A,{children:(0,k.jsx)(d.A,{variant:"outlined",startIcon:(0,k.jsx)($.A,{}),onClick:()=>{const e=new Date;C(e.getMonth()+1),I(e.getFullYear())},sx:{ml:2},children:"Today"})})]}),(0,k.jsx)(l.A,{sx:{p:3,mb:4,bgcolor:"background.default"},children:(0,k.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:["month"===E&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.A,{onClick:()=>z(S-1),"aria-label":"Previous month",children:(0,k.jsx)(W.A,{})}),(0,k.jsx)(R.$,{dateAdapter:L.h,children:(0,k.jsx)(Y.l,{views:["year","month"],label:"Year and Month",minDate:new Date("2000-01-01"),maxDate:new Date("2050-12-31"),value:new Date(D,S-1),onChange:e=>{e&&(I(e.getFullYear()),C(e.getMonth()+1))},renderInput:e=>(0,k.jsx)(j.A,{...e,variant:"standard",helperText:null}),sx:{mx:2,width:170}})}),(0,k.jsx)(y.A,{onClick:()=>z(S+1),"aria-label":"Next month",children:(0,k.jsx)(F.A,{})})]}),"year"===E&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.A,{onClick:()=>I(D-1),"aria-label":"Previous year",children:(0,k.jsx)(W.A,{})}),(0,k.jsx)(R.$,{dateAdapter:L.h,children:(0,k.jsx)(Y.l,{views:["year"],label:"Year",minDate:new Date("2000-01-01"),maxDate:new Date("2050-12-31"),value:new Date(D,0),onChange:e=>{e&&I(e.getFullYear())},renderInput:e=>(0,k.jsx)(j.A,{...e,variant:"standard",helperText:null}),sx:{mx:2,width:170}})}),(0,k.jsx)(y.A,{onClick:()=>I(D+1),"aria-label":"Next year",children:(0,k.jsx)(F.A,{})})]})]}),(0,k.jsxs)(i.A,{sx:{textAlign:"right"},children:[(0,k.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:"month"===E?`${(null===f||void 0===f||null===(e=f.months)||void 0===e||null===(a=e.gregorian)||void 0===a?void 0:a.name)||new Date(D,S-1).toLocaleString("default",{month:"long"})} ${D}`:`${D} Prayer Times Calendar`}),(null===f||void 0===f?void 0:f.meta)&&(0,k.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:["Method: ",(null===(t=f.meta.method)||void 0===t?void 0:t.name)||"ISNA"," \u2022 School: ",f.meta.school||"Standard"]})]})]})}),"month"===E?(()=>{if(!f||!f.days)return(0,k.jsxs)(i.A,{sx:{mt:4,p:3,textAlign:"center",border:"1px dashed",borderColor:"divider",borderRadius:2},children:[(0,k.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Prayer Times Calendar"}),(0,k.jsx)(s.A,{variant:"body1",sx:{mb:2},children:"No prayer times data available for the selected month. Please try a different month or check your connection."})]});const e=(new Date).toISOString().split("T")[0];return(0,k.jsx)(i.A,{sx:{mt:2},children:(0,k.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,k.jsx)(r.Ay,{item:!0,xs:12,children:(0,k.jsx)(l.A,{sx:{p:2,mb:2,bgcolor:"primary.main",color:"primary.contrastText"},children:(0,k.jsxs)(r.Ay,{container:!0,children:[(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Date"})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Fajr"})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Sunrise"})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Dhuhr"})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Asr"})}),(0,k.jsx)(r.Ay,{item:!0,xs:2,children:(0,k.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:"Maghrib"})})]})})}),f.days.map(((a,t)=>(0,k.jsx)(r.Ay,{item:!0,xs:12,children:(0,k.jsx)(l.A,{sx:{p:2,bgcolor:a.date===e?"action.selected":"background.paper"},elevation:a.date===e?3:1,children:q(a)})},a.date||t)))]})})})():f&&f.months?(0,k.jsxs)(i.A,{sx:{mt:2},children:[(0,k.jsxs)(s.A,{variant:"h5",gutterBottom:!0,sx:{mb:3},children:[D," Prayer Times Overview",f.isSimplified&&(0,k.jsx)(s.A,{component:"span",variant:"body2",color:"text.secondary",sx:{ml:2},children:"(Preview mode - showing first day of each month)"})]}),f.isSimplified&&(0,k.jsx)(o.A,{severity:"info",sx:{mt:1,mb:3},children:'For performance reasons, the yearly view shows sample prayer times from the first day of each month. For complete daily prayer times, please click "View Details" on any month.'}),(0,k.jsx)(r.Ay,{container:!0,spacing:3,children:Array.isArray(f.months)&&f.months.map(((e,a)=>{var t,n,o,h,c,m;return(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,k.jsxs)(l.A,{sx:{p:2,height:"100%"},children:[(0,k.jsx)(s.A,{variant:"h6",color:"primary",gutterBottom:!0,children:e.monthName}),(0,k.jsx)(d.A,{variant:"outlined",size:"small",onClick:()=>{C(e.month),_("month")},startIcon:(0,k.jsx)(P.A,{}),sx:{mb:2},children:"View Details"}),e.error?(0,k.jsx)(s.A,{variant:"body2",color:"error",children:e.error}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:[(null===(t=e.days)||void 0===t?void 0:t.length)||0," days of prayer times available",e.isPreview&&" (Preview)"]}),e.days&&e.days.length>0&&(0,k.jsxs)(i.A,{sx:{mt:1},children:[(0,k.jsx)(s.A,{variant:"body2",gutterBottom:!0,children:(0,k.jsxs)("strong",{children:["Sample Prayer Times ",e.isPreview?"(1st of month)":"",":"]})}),(0,k.jsxs)(i.A,{sx:{pl:2,borderLeft:"2px solid",borderColor:"primary.main",ml:1},children:[(0,k.jsxs)(s.A,{variant:"caption",display:"block",children:["Fajr: ",null===(n=e.days[0].timings)||void 0===n?void 0:n.Fajr]}),(0,k.jsxs)(s.A,{variant:"caption",display:"block",children:["Dhuhr: ",null===(o=e.days[0].timings)||void 0===o?void 0:o.Dhuhr]}),(0,k.jsxs)(s.A,{variant:"caption",display:"block",children:["Asr: ",null===(h=e.days[0].timings)||void 0===h?void 0:h.Asr]}),(0,k.jsxs)(s.A,{variant:"caption",display:"block",children:["Maghrib: ",null===(c=e.days[0].timings)||void 0===c?void 0:c.Maghrib]}),(0,k.jsxs)(s.A,{variant:"caption",display:"block",children:["Isha: ",null===(m=e.days[0].timings)||void 0===m?void 0:m.Isha]})]})]})]})]})},`month-${a}`)}))})]}):(0,k.jsxs)(i.A,{sx:{mt:4,p:3,textAlign:"center",border:"1px dashed",borderColor:"divider",borderRadius:2},children:[(0,k.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Yearly Prayer Times Calendar"}),(0,k.jsx)(s.A,{variant:"body1",sx:{mb:2},children:"No yearly prayer times data available. Please try a different year or check your connection."})]})]})})]})]})}}}]);
//# sourceMappingURL=718.a366a5b7.chunk.js.map