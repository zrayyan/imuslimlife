"use strict";(self.webpackChunksalat_e_mustaqeem_client=self.webpackChunksalat_e_mustaqeem_client||[]).push([[442],{442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var l=a(5043),n=a(6240),s=a(2703),i=a(1637),r=a(5865),o=a(1906),c=a(5381),d=a(2698),h=a(8446),x=a(8903),m=a(3336),u=a(7784),g=a(1787),p=a(3193),f=a(8356),A=a(9285),y=a(2143),j=a(7629),b=a(2110),v=a(6591),S=a(6494),C=a(7392),P=a(6641),w=a(3845),M=a(9336),k=a(7600),I=a(9135),z=a(5475),L=a(6184),W=a(3639),_=a(9450),F=a(6360),R=a(9974),T=a(6520),$=a(9454),B=a(4182),D=a(9466),E=a(518),q=a(5573),H=a(579);const N=e=>{let{size:t=280,compact:a=!1}=e;const i=(0,l.useRef)(null),r=(0,n.A)(),o=(0,l.useRef)(null),c=(0,l.useRef)([]),d=a?30:60;return(0,l.useEffect)((()=>{const e=i.current;if(!e)return;const a=e.getContext("2d"),l=e.width/2,n=e.height/2,s=.25*t,r=1.65*s,h=.12*s;c.current=Array(d).fill().map((()=>({angle:Math.random()*Math.PI*2,distance:r*(.95+.15*Math.random()),speed:.003*(.7+.6*Math.random()),size:s*(.05+.04*Math.random()),color:Math.random()>.5?"#ffffff":"#f0f0f0"})));const x=Array(8).fill().map(((e,t)=>t/8*Math.PI*2)),m=()=>{a.clearRect(0,0,e.width,e.height),a.save(),x.forEach((e=>{const t=4*s;a.beginPath(),a.moveTo(l,n);const i=l+Math.cos(e)*t,r=n+Math.sin(e)*t,o=a.createLinearGradient(l,n,i,r);o.addColorStop(0,"rgba(212, 175, 55, 0.6)"),o.addColorStop(1,"rgba(212, 175, 55, 0)"),a.lineTo(i,r),a.lineWidth=.12*s,a.strokeStyle=o,a.stroke()})),a.restore(),a.beginPath(),a.arc(l,n,r,0,2*Math.PI),a.lineWidth=1,a.strokeStyle="rgba(150, 150, 150, 0.2)",a.stroke();const t=l+.6*r,i=n;a.beginPath(),a.arc(t,i+.1*h,.85*h,0,2*Math.PI),a.fillStyle="rgba(0, 0, 0, 0.2)",a.fill(),a.beginPath(),a.arc(t,i,h,0,2*Math.PI),a.fillStyle="#d4d0c8",a.fill(),a.strokeStyle="#a9a9a9",a.lineWidth=1,a.stroke(),a.beginPath(),a.arc(t,i,.7*h,0,2*Math.PI),a.fillStyle="#e8e4dc",a.fill(),a.beginPath(),a.ellipse(t-.25*h,i,.2*h,.1*h,0,0,2*Math.PI),a.ellipse(t+.25*h,i,.2*h,.1*h,0,0,2*Math.PI),a.fillStyle="rgba(100, 100, 100, 0.3)",a.fill(),c.current.forEach(((e,t)=>{e.angle+=e.speed;const s=l+Math.cos(e.angle)*e.distance,i=n+Math.sin(e.angle)*e.distance;a.beginPath(),a.ellipse(s,i+.2*e.size,.8*e.size,.3*e.size,0,0,2*Math.PI),a.fillStyle="rgba(0, 0, 0, 0.15)",a.fill(),a.beginPath(),a.arc(s,i,e.size,0,2*Math.PI),a.fillStyle=e.color,a.fill(),a.strokeStyle="#d0d0d0",a.lineWidth=.5,a.stroke()})),a.fillStyle="#000000",a.beginPath(),a.rect(l-s/2,n-s/2,s,s),a.fill(),a.strokeStyle="rgba(100, 100, 100, 0.4)",a.lineWidth=.5;for(let e=1;e<10;e++){const t=n-s/2+s/10*e;a.beginPath(),a.moveTo(l-s/2,t),a.lineTo(l+s/2,t),a.stroke()}for(let e=1;e<10;e++){const t=l-s/2+s/10*e;a.beginPath(),a.moveTo(t,n-s/2),a.lineTo(t,n+s/2),a.stroke()}const d=.15*s;a.fillStyle="#d4af37",a.beginPath(),a.rect(l-s/2,n-s/2+s/3,s,d),a.fill(),a.strokeStyle="#444444",a.lineWidth=1,a.strokeRect(l-s/2,n-s/2,s,s);const u=.3*s,g=.4*s,p=l+.05*s,f=n-.05*s;a.fillStyle="#d4af37",a.beginPath(),a.rect(p-u/2,f-g/2,u,g),a.fill(),a.strokeStyle="#8b7500",a.lineWidth=1,a.strokeRect(p-u/2,f-g/2,u,g),a.fillStyle="#8b7500",a.beginPath(),a.rect(p-u/2+.15*u,f-g/2+.15*g,.7*u,.7*g),a.fill();const A=.08*s,y=l-s/2,j=n-.1*s;a.beginPath(),a.arc(y,j,A,0,2*Math.PI),a.fillStyle="#333333",a.fill(),a.strokeStyle="#d4af37",a.lineWidth=2,a.stroke(),a.beginPath(),a.arc(y,j,1.3*A,0,2*Math.PI);const b=a.createRadialGradient(y,j,A,y,j,1.3*A);b.addColorStop(0,"rgba(212, 175, 55, 0.5)"),b.addColorStop(1,"rgba(212, 175, 55, 0)"),a.fillStyle=b,a.fill(),o.current=requestAnimationFrame(m)};return m(),()=>{o.current&&cancelAnimationFrame(o.current)}}),[t,a]),(0,H.jsx)(s.A,{sx:{width:t,height:t,position:"relative",borderRadius:"50%",background:`radial-gradient(circle, ${r.palette.background.paper} 0%, ${r.palette.background.default} 100%)`,boxShadow:"inset 0 0 30px rgba(0,0,0,0.05)",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",mx:"auto"},children:(0,H.jsx)("canvas",{ref:i,width:t,height:t,style:{display:"block"}})})},G=()=>{const e=(0,n.A)(),{favorites:t,toggleFavorite:a}=(0,L.LB)(),[G,U]=(0,l.useState)([]),[O,Q]=(0,l.useState)(!0),[V,Y]=(0,l.useState)(null),[Z,J]=(0,l.useState)(""),[K,X]=(0,l.useState)("distance"),[ee,te]=(0,l.useState)("all"),[ae,le]=(0,l.useState)([]),[ne,se]=(0,l.useState)(1),[ie,re]=(0,l.useState)("all"),[oe,ce]=(0,l.useState)(null),[de,he]=(0,l.useState)(50),xe=50;(0,l.useEffect)((()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{ce({lat:e.coords.latitude,lng:e.coords.longitude})}),(e=>{console.error("Error getting location:",e),X("name")}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):(console.error("Geolocation is not supported by this browser."),X("name"))}),[]),(0,l.useEffect)((()=>{(async()=>{Q(!0),Y(null);try{const e=await fetch("http://localhost:3000/places");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=(await e.json()).map((e=>({...e,distance:null})));U(t)}catch(e){console.error("Failed to fetch places:",e),Y(`Failed to load place data: ${e.message}. Please ensure the API is running at http://localhost:3000/places.`)}finally{Q(!1)}})()}),[]),(0,l.useEffect)((()=>{let e=[...G];oe?(e=e.map((e=>{if(e.coordinates&&e.coordinates.lat&&e.coordinates.lng){const t=((e,t,a,l)=>{const n=(a-e)*Math.PI/180,s=(l-t)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371*.621371})(oe.lat,oe.lng,e.coordinates.lat,e.coordinates.lng);return{...e,distance:t}}return{...e,distance:1/0}})),de<xe&&(e=e.filter((e=>e.distance<=de)))):(e=e.map((e=>({...e,distance:1/0}))),"distance"===K&&X("name")),Z&&(e=e.filter((e=>e.name&&e.name.toLowerCase().includes(Z.toLowerCase())||e.address&&e.address.toLowerCase().includes(Z.toLowerCase())))),"all"!==ie&&(e=e.filter((e=>e.type&&e.type.toLowerCase()===ie.toLowerCase()))),"favorites"===ee&&(e=e.filter((e=>e._id&&t.includes(e._id)))),"distance"===K&&oe?e.sort(((e,t)=>e.distance-t.distance)):"rating"===K?e.sort(((e,t)=>{var a,l;return(null!==(a=t.rating)&&void 0!==a?a:0)-(null!==(l=e.rating)&&void 0!==l?l:0)})):"name"===K&&e.sort(((e,t)=>{var a,l;return(null!==(a=e.name)&&void 0!==a?a:"").localeCompare(null!==(l=t.name)&&void 0!==l?l:"")})),le(e),se(1)}),[Z,K,ee,ie,t,G,oe,de]);const me=ae.slice(9*(ne-1),9*ne),ue=Math.ceil(ae.length/9);return O?(0,H.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"60vh"},children:[(0,H.jsx)(i.A,{size:60}),(0,H.jsx)(r.A,{sx:{mt:2},children:"Loading place directory..."})]}):V?(0,H.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"50vh",textAlign:"center",p:3},children:[(0,H.jsx)(r.A,{color:"error",variant:"h6",children:V}),(0,H.jsx)(o.A,{variant:"contained",sx:{mt:2},onClick:()=>window.location.reload(),children:"Try Again"})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(s.A,{sx:{background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.primary.dark})`,color:"white",pt:8,pb:6,position:"relative"},children:[(0,H.jsxs)(c.A,{maxWidth:"lg",children:[(0,H.jsx)(r.A,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"500",children:"Islamic Places Directory"}),(0,H.jsx)(r.A,{variant:"h6",sx:{maxWidth:800,mb:3,opacity:.9},children:"Find mosques, Islamic centers, halal restaurants, and more near you."}),(0,H.jsxs)(d.A,{"aria-label":"breadcrumb",sx:{color:"rgba(255, 255, 255, 0.7)"},children:[(0,H.jsxs)(h.A,{component:z.N_,to:"/",sx:{display:"flex",alignItems:"center",color:"inherit","&:hover":{color:"white"}},children:[(0,H.jsx)(W.A,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),(0,H.jsxs)(r.A,{color:"white",sx:{display:"flex",alignItems:"center"},children:[(0,H.jsx)(_.A,{sx:{mr:.5},fontSize:"inherit"}),"Places Directory"]})]})]}),(0,H.jsx)(s.A,{sx:{position:"absolute",bottom:-1,left:0,width:"100%",lineHeight:0,color:e.palette.background.default},children:(0,H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 100",children:(0,H.jsx)("path",{fill:"currentColor",fillOpacity:"1",d:"M0,32L48,48C96,64,192,96,288,96C384,96,480,64,576,48C672,32,768,32,864,32C960,32,1056,32,1152,42.7C1248,53,1344,75,1392,85.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})})]}),(0,H.jsx)(c.A,{maxWidth:"lg",sx:{py:6},children:(0,H.jsxs)(x.Ay,{container:!0,spacing:4,children:[(0,H.jsxs)(x.Ay,{item:!0,xs:12,md:3,children:[(0,H.jsxs)(m.A,{elevation:2,sx:{p:3,mb:3,borderRadius:2},children:[(0,H.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Find Places"}),(0,H.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2,color:oe?e.palette.success.main:e.palette.text.secondary},children:[(0,H.jsx)(q.A,{fontSize:"small",sx:{mr:1}}),(0,H.jsx)(r.A,{variant:"body2",children:oe?"Location detected":"Location unavailable"})]}),(0,H.jsx)(u.A,{fullWidth:!0,variant:"outlined",label:"Search by Name or Address",value:Z,onChange:e=>{J(e.target.value)},margin:"normal",InputProps:{startAdornment:(0,H.jsx)(g.A,{position:"start",children:(0,H.jsx)(F.A,{})})},sx:{mb:2}}),(0,H.jsxs)(p.A,{fullWidth:!0,margin:"normal",sx:{mb:2},children:[(0,H.jsx)(f.A,{children:"Place Type"}),(0,H.jsxs)(A.A,{value:ie,onChange:e=>re(e.target.value),label:"Place Type",children:[(0,H.jsx)(y.A,{value:"all",children:"All Types"}),(0,H.jsx)(y.A,{value:"masjid",children:"Masjid"}),(0,H.jsx)(y.A,{value:"musalla",children:"Musalla"}),(0,H.jsx)(y.A,{value:"islamic center",children:"Islamic Center"}),(0,H.jsx)(y.A,{value:"halal restaurant",children:"Halal Restaurant"}),(0,H.jsx)(y.A,{value:"halal grocery",children:"Halal Grocery"})]})]}),(0,H.jsxs)(p.A,{fullWidth:!0,margin:"normal",sx:{mb:2},children:[(0,H.jsx)(f.A,{children:"Filter By"}),(0,H.jsxs)(A.A,{value:ee,onChange:e=>te(e.target.value),label:"Filter By",children:[(0,H.jsx)(y.A,{value:"all",children:"All Places"}),(0,H.jsx)(y.A,{value:"favorites",children:"My Favorites"})]})]}),(0,H.jsxs)(p.A,{fullWidth:!0,margin:"normal",sx:{mb:2},children:[(0,H.jsxs)(r.A,{gutterBottom:!0,children:["Distance Radius (",de===xe?"Any":`${de} mi`,")"]}),(0,H.jsx)(j.Ay,{value:de,onChange:(e,t)=>{he(t)},"aria-labelledby":"distance-radius-slider",valueLabelDisplay:"auto",step:1,marks:[{value:1,label:"1 mi"},{value:10,label:"10"},{value:25,label:"25"},{value:xe,label:"Any"}],min:1,max:xe,disabled:!oe}),!oe&&(0,H.jsx)(r.A,{variant:"caption",color:"textSecondary",children:"Enable location to filter by distance."})]}),(0,H.jsxs)(p.A,{fullWidth:!0,margin:"normal",children:[(0,H.jsx)(f.A,{children:"Sort By"}),(0,H.jsxs)(A.A,{value:K,onChange:e=>X(e.target.value),label:"Sort By",disabled:!oe&&"distance"===K,children:[(0,H.jsx)(y.A,{value:"distance",disabled:!oe,children:"Distance"}),(0,H.jsx)(y.A,{value:"rating",children:"Rating"}),(0,H.jsx)(y.A,{value:"name",children:"Name"})]}),!oe&&"distance"===K&&(0,H.jsx)(r.A,{variant:"caption",color:"textSecondary",sx:{mt:1},children:"Enable location services to sort by distance."})]})]}),(0,H.jsxs)(s.A,{sx:{textAlign:"center",mt:4,display:{xs:"none",md:"block"}},children:[(0,H.jsx)(N,{size:220,compact:!0}),(0,H.jsxs)(r.A,{variant:"body2",sx:{mt:2,color:"text.secondary",fontStyle:"italic"},children:['"The mosques of Allah are only to be maintained by those who believe in Allah and the Last Day..."',(0,H.jsx)("br",{}),(0,H.jsx)("span",{style:{opacity:.8},children:"\u2014 Quran 9:18"})]})]})]}),(0,H.jsxs)(x.Ay,{item:!0,xs:12,md:9,children:[(0,H.jsx)(s.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,H.jsxs)(r.A,{variant:"h5",children:[ae.length," ",1===ae.length?"Place":"Places"," Found"]})}),0!==ae.length||O?(0,H.jsx)(x.Ay,{container:!0,spacing:3,children:me.map((l=>{var n,i,c,d;return(0,H.jsx)(x.Ay,{item:!0,xs:12,sm:6,lg:4,children:(0,H.jsxs)(b.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-5px)"}},children:[(0,H.jsx)(v.A,{component:"img",height:"160",image:`https://via.placeholder.com/600x400.png?text=${encodeURIComponent(l.name||"Islamic Place")}`,alt:l.name||"Islamic place image"}),(0,H.jsxs)(S.A,{sx:{flexGrow:1},children:[(0,H.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,H.jsx)(r.A,{variant:"h6",component:z.N_,to:`/place/${l._id}`,sx:{textDecoration:"none",color:e.palette.primary.main,"&:hover":{textDecoration:"underline"},mb:1},children:l.name||"Unnamed Place"}),(0,H.jsx)(C.A,{size:"small",onClick:()=>a(l._id),sx:{color:"rgba(0,0,0,0.54)"},children:t.includes(l._id)?(0,H.jsx)(T.A,{sx:{color:e.palette.error.main}}):(0,H.jsx)($.A,{})})]}),void 0!==l.rating&&null!==l.rating&&(0,H.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,H.jsx)(P.A,{value:l.rating,precision:.1,size:"small",readOnly:!0}),void 0!==l.reviewCount&&(0,H.jsxs)(r.A,{variant:"body2",color:"text.secondary",sx:{ml:1},children:["(",l.reviewCount,")"]})]}),l.address&&(0,H.jsxs)(s.A,{sx:{display:"flex",alignItems:"flex-start",mb:1},children:[(0,H.jsx)(R.A,{fontSize:"small",sx:{color:e.palette.text.secondary,mt:.3,mr:1,flexShrink:0}}),(0,H.jsx)(r.A,{variant:"body2",color:"text.secondary",children:l.address})]}),(0,H.jsxs)(s.A,{sx:{mt:2},children:[oe&&null!==l.distance&&l.distance!==1/0&&(0,H.jsx)(w.A,{size:"small",color:"primary",variant:"outlined",label:`${l.distance.toFixed(1)} mi`,icon:(0,H.jsx)(B.A,{fontSize:"small"}),sx:{mr:1,mb:1}}),l.type&&(0,H.jsx)(w.A,{size:"small",color:"secondary",label:l.type.charAt(0).toUpperCase()+l.type.slice(1),sx:{mr:1,mb:1}})]})]}),(0,H.jsx)(M.A,{}),(0,H.jsxs)(k.A,{sx:{justifyContent:"space-between"},children:[(0,H.jsx)(o.A,{size:"small",startIcon:(0,H.jsx)(B.A,{}),component:"a",href:null!==(n=l.coordinates)&&void 0!==n&&n.lat&&null!==(i=l.coordinates)&&void 0!==i&&i.lng?`https://maps.google.com/?q=${l.coordinates.lat},${l.coordinates.lng}`:`https://maps.google.com/?q=${encodeURIComponent(l.address||l.name||"")}`,target:"_blank",rel:"noopener noreferrer",disabled:!l.address&&!(null!==(c=l.coordinates)&&void 0!==c&&c.lat&&null!==(d=l.coordinates)&&void 0!==d&&d.lng),children:"Directions"}),(0,H.jsxs)(s.A,{children:[l.phone&&(0,H.jsx)(C.A,{size:"small",component:"a",href:`tel:${l.phone.replace(/[^\d+]/g,"")}`,sx:{mr:1},"aria-label":"Call",children:(0,H.jsx)(D.A,{fontSize:"small"})}),l.website&&(0,H.jsx)(C.A,{size:"small",component:"a",href:l.website.startsWith("http")?l.website:`http://${l.website}`,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit website",children:(0,H.jsx)(E.A,{fontSize:"small"})})]})]})]})},l._id)}))}):(0,H.jsxs)(m.A,{sx:{p:4,textAlign:"center"},children:[(0,H.jsx)(_.A,{sx:{fontSize:60,color:e.palette.text.secondary,opacity:.5,mb:2}}),(0,H.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"No places found"}),(0,H.jsx)(r.A,{variant:"body2",color:"textSecondary",children:Z||"all"!==ie||"all"!==ee||oe&&de<xe?"Try adjusting your search, filters, or distance radius.":"No places available or the API might be down."}),(0,H.jsx)(o.A,{variant:"contained",color:"primary",sx:{mt:2},onClick:()=>{J(""),re("all"),te("all"),he(xe),X(oe?"distance":"name")},children:"Reset Filters"})]}),ue>1&&(0,H.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,H.jsx)(I.A,{count:ue,page:ne,onChange:(e,t)=>{se(t),window.scrollTo(0,0)},color:"primary",size:"large",showFirstButton:!0,showLastButton:!0})})]})]})})]})}}}]);
//# sourceMappingURL=442.d8e9430c.chunk.js.map