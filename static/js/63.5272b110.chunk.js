"use strict";(self.webpackChunksalat_e_mustaqeem_client=self.webpackChunksalat_e_mustaqeem_client||[]).push([[63],{2807:(e,t,n)=>{n.d(t,{MG:()=>a});const a=e=>{if(!e)return"";const[t,n]=e.split(":").map(Number);let a="AM",i=t;return t>=12&&(a="PM",t>12&&(i=t-12)),0===i&&(i=12),`${i}:${String(n).padStart(2,"0")} ${a}`}},5063:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qe});var a=n(5043),i=n(9367),r=n(5381),o=n(2703),s=n(5865),l=n(4194),c=n(1906),d=n(8903),u=n(4669),m=n(4056),h=n(1637),p=n(4605),x=n(4598),g=n(1081),y=n(6600),f=n(5316),A=n(9347),j=n(794),b=n(9974),v=n(6171),w=n(7072),S=n(2110),k=n(9958),M=n(279),E=n(6494),I=n(3193),P=n(1292),N=n(8492),C=n(4256),T=n(7784),D=n(1787),$=n(1082),R=n(8293),F=n(2337),z=n(9484),W=n(1214),L=n(9993),_=n(6543),B=n(579);const O=e=>{let{onSubmit:t}=e;const[n,i]=(0,a.useState)("coordinates"),[r,d]=(0,a.useState)(_.oL.latitude.toString()),[u,m]=(0,a.useState)(_.oL.longitude.toString()),[x,g]=(0,a.useState)(_.oL.address),[y,f]=(0,a.useState)(new Date),[A,j]=(0,a.useState)((0,L.A)(new Date,"yyyy-MM-dd")),[b,O]=(0,a.useState)(null),[q,H]=(0,a.useState)(!0),{location:G,loading:U,error:J,getCurrentPosition:V}=(0,w.A)(),{params:Y,updateParams:K}=(0,v.xn)();(0,a.useEffect)((()=>{G&&(d(G.latitude.toFixed(6)),m(G.longitude.toFixed(6)),i("coordinates"),K({latitude:G.latitude,longitude:G.longitude}))}),[G,K]);return(0,B.jsxs)(S.A,{elevation:2,children:[(0,B.jsx)(k.A,{title:(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)($.A,{sx:{mr:1,color:"primary.main"}}),(0,B.jsx)(s.A,{variant:"h6",component:"span",children:"Location"}),(0,B.jsx)(c.A,{size:"small",onClick:()=>{H(!q)},sx:{ml:"auto"},endIcon:(0,B.jsx)(R.A,{sx:{transform:q?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}}),children:q?"Hide":"Show"})]}),sx:{bgcolor:"background.default",borderBottom:"1px solid",borderColor:"divider"}}),(0,B.jsx)(M.A,{in:q,children:(0,B.jsx)(E.A,{children:(0,B.jsxs)("form",{onSubmit:e=>{e.preventDefault(),O(null);try{if("coordinates"===n){const e=parseFloat(r),n=parseFloat(u);if(isNaN(e)||isNaN(n)||e<-90||e>90||n<-180||n>180)throw new Error("Please enter valid coordinates. Latitude must be between -90 and 90, longitude between -180 and 180.");K({latitude:e,longitude:n}),t&&t({type:"coordinates",data:{latitude:e,longitude:n},date:y})}else{if(!x||""===x.trim())throw new Error("Please enter a valid address.");t&&t({type:"address",data:{address:x},date:y})}}catch(a){O(a.message)}},children:[(0,B.jsxs)(I.A,{component:"fieldset",sx:{mb:2,width:"100%"},children:[(0,B.jsx)(P.A,{component:"legend",children:"Location Method"}),(0,B.jsxs)(N.A,{row:!0,name:"location-type",value:n,onChange:e=>{i(e.target.value)},children:[(0,B.jsx)(p.A,{value:"coordinates",control:(0,B.jsx)(C.A,{}),label:"Coordinates"}),(0,B.jsx)(p.A,{value:"address",control:(0,B.jsx)(C.A,{}),label:"Address / City"})]})]}),J&&(0,B.jsx)(l.A,{severity:"warning",sx:{mb:2},children:J.message||"Unable to get your location. Please enter it manually."}),b&&(0,B.jsx)(l.A,{severity:"error",sx:{mb:2},children:b}),(0,B.jsxs)(o.A,{sx:{display:"coordinates"===n?"block":"none"},children:[(0,B.jsxs)(o.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,B.jsx)(T.A,{label:"Latitude",value:r,onChange:e=>d(e.target.value),type:"number",inputProps:{step:1e-6},fullWidth:!0,required:"coordinates"===n,helperText:"Between -90 and 90",InputLabelProps:{shrink:!0},placeholder:"e.g., 28.6694"}),(0,B.jsx)(T.A,{label:"Longitude",value:u,onChange:e=>m(e.target.value),type:"number",inputProps:{step:1e-6},fullWidth:!0,required:"coordinates"===n,helperText:"Between -180 and 180",InputLabelProps:{shrink:!0},placeholder:"e.g., -81.4279"})]}),(0,B.jsx)(c.A,{startIcon:U?(0,B.jsx)(h.A,{size:20}):(0,B.jsx)(F.A,{}),onClick:()=>{V()},disabled:U,variant:"outlined",size:"small",fullWidth:!0,sx:{mb:2},children:U?"Getting Location...":"Use My Current Location"})]}),(0,B.jsx)(o.A,{sx:{display:"address"===n?"block":"none",mb:2},children:(0,B.jsx)(T.A,{label:"Address or City",value:x,onChange:e=>g(e.target.value),required:"address"===n,fullWidth:!0,placeholder:"e.g., Orlando, FL",InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,B.jsx)(D.A,{position:"start",children:(0,B.jsx)(z.A,{})})}})}),(0,B.jsx)(T.A,{label:"Date",type:"date",value:A,onChange:e=>{const t=e.target.value;j(t);const n=new Date(t);isNaN(n.getTime())||f(n)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,B.jsx)(D.A,{position:"start",children:(0,B.jsx)(W.A,{})})}}),(0,B.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",sx:{mt:2},startIcon:(0,B.jsx)($.A,{}),children:"Set Location"})]})})})]})};var q=n(8356),H=n(9285),G=n(2143);const U=e=>{let{onSubmit:t}=e;const{params:n}=(0,v.xn)(),[i,r]=(0,a.useState)({method:n.method||2,school:n.school||0,latitudeAdjustmentMethod:n.latitudeAdjustmentMethod||3,midnightMode:n.midnightMode||0});function l(e){const t={NONE:0,NIGHT_MIDDLE:1,ONE_SEVENTH:2,ANGLE_BASED:3};return e&&void 0!==t[e]?t[e]:3}function u(e){const t={STANDARD:0,JAFARI:1};return e&&void 0!==t[e]?t[e]:0}(0,a.useEffect)((()=>{r({method:n.method||2,school:n.school||0,latitudeAdjustmentMethod:l(n.latitudeAdjustmentMethod),midnightMode:u(n.midnightMode)})}),[n]);const m=e=>{r({...i,[e.target.name]:e.target.value})};return(0,B.jsx)(S.A,{children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Calculation Settings"}),(0,B.jsx)(o.A,{component:"form",onSubmit:e=>{e.preventDefault();const n={...i,latitudeAdjustmentMethod:(r=i.latitudeAdjustmentMethod,void 0!==r?{0:"NONE",1:"NIGHT_MIDDLE",2:"ONE_SEVENTH",3:"ANGLE_BASED"}[r]:"ANGLE_BASED"),midnightMode:(a=i.midnightMode,void 0!==a?{0:"STANDARD",1:"JAFARI"}[a]:"STANDARD")};var a,r;t(n)},children:(0,B.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,B.jsx)(d.Ay,{item:!0,xs:12,children:(0,B.jsxs)(I.A,{fullWidth:!0,margin:"normal",children:[(0,B.jsx)(q.A,{id:"method-label",children:"Calculation Method"}),(0,B.jsx)(H.A,{labelId:"method-label",id:"method",name:"method",value:i.method,label:"Calculation Method",onChange:m,children:_.JL.map((e=>(0,B.jsx)(G.A,{value:e.id,children:e.name},e.id)))})]})}),(0,B.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,B.jsxs)(I.A,{fullWidth:!0,margin:"normal",children:[(0,B.jsx)(q.A,{id:"school-label",children:"Juristic Method"}),(0,B.jsx)(H.A,{labelId:"school-label",id:"school",name:"school",value:i.school,label:"Juristic Method",onChange:m,children:_.nU.map((e=>(0,B.jsx)(G.A,{value:e.id,children:e.name},e.id)))})]})}),(0,B.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,B.jsxs)(I.A,{fullWidth:!0,margin:"normal",children:[(0,B.jsx)(q.A,{id:"latitude-method-label",children:"High Latitude Method"}),(0,B.jsxs)(H.A,{labelId:"latitude-method-label",id:"latitudeAdjustmentMethod",name:"latitudeAdjustmentMethod",value:i.latitudeAdjustmentMethod,label:"High Latitude Method",onChange:m,children:[(0,B.jsx)(G.A,{value:0,children:"None"}),(0,B.jsx)(G.A,{value:1,children:"Middle of Night"}),(0,B.jsx)(G.A,{value:2,children:"1/7th of Night"}),(0,B.jsx)(G.A,{value:3,children:"Angle Based"})]})]})}),(0,B.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,B.jsxs)(I.A,{fullWidth:!0,margin:"normal",children:[(0,B.jsx)(q.A,{id:"midnight-mode-label",children:"Midnight Mode"}),(0,B.jsxs)(H.A,{labelId:"midnight-mode-label",id:"midnightMode",name:"midnightMode",value:i.midnightMode,label:"Midnight Mode",onChange:m,children:[(0,B.jsx)(G.A,{value:0,children:"Standard (Mid Sunset to Sunrise)"}),(0,B.jsx)(G.A,{value:1,children:"Jafari (Mid Sunset to Fajr)"})]})]})}),(0,B.jsx)(d.Ay,{item:!0,xs:12,children:(0,B.jsx)(o.A,{sx:{mt:2},children:(0,B.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Apply Settings"})})})]})})]})})};var J=n(9650),V=n(3336),Y=n(1806),K=n(4882),Q=n(8076),Z=n(2420),X=n(3460);const ee=(0,a.memo)((e=>{let{prayerTimes:t,loading:n}=e;const{params:a,hijriDate:i}=(0,v.xn)();if(n||!t||0===Object.keys(t).length)return(0,B.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",my:4},children:[(0,B.jsx)(h.A,{}),(0,B.jsx)(s.A,{variant:"body1",sx:{ml:2},children:"Loading prayer times..."})]});const r=Object.entries(t).filter((e=>{let[t]=e;return!["Sunset","Imsak","Firstthird","Lastthird"].includes(t)})),l=a.address||`${a.latitude}, ${a.longitude}`,c=i?(e=>e?`${e.day} ${e.month.en} ${e.year} AH`:"")(i):"",d=(e=>{const t=_.JL.find((t=>t.id===e));return t?t.name:"Unknown"})(a.method),u=(e=>{const t=_.nU.find((t=>t.id===e));return t?t.name:"Standard"})(a.school);let m,p;try{m=(e=>{if("number"===typeof e){const t={0:"NONE",1:"NIGHT_MIDDLE",2:"ONE_SEVENTH",3:"ANGLE_BASED"};return t[e]?t[e].replace("_"," "):"ANGLE BASED"}return e?e.replace("_"," "):"ANGLE BASED"})(a.latitudeAdjustmentMethod),p=(e=>{if("number"===typeof e)return{0:"STANDARD",1:"JAFARI"}[e]||"STANDARD";return e||"STANDARD"})(a.midnightMode)}catch(x){console.error("Error formatting params:",x),m="Angle Based",p="Standard"}return(0,B.jsxs)(o.A,{children:[(0,B.jsx)(S.A,{sx:{mb:4},children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Prayer Times"}),(0,B.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[l,c&&` - ${c}`]}),(0,B.jsx)(J.A,{component:V.A,variant:"outlined",children:(0,B.jsxs)(Y.A,{children:[(0,B.jsx)(K.A,{children:(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{children:(0,B.jsx)("strong",{children:"Prayer"})}),(0,B.jsx)(Z.A,{align:"right",children:(0,B.jsx)("strong",{children:"Time"})})]})}),(0,B.jsx)(X.A,{children:r.map((e=>{let[t,n]=e;return(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:t}),(0,B.jsx)(Z.A,{align:"right",children:n})]},t)}))})]})})]})}),(0,B.jsx)(S.A,{children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Calculation Settings"}),(0,B.jsx)(J.A,{component:V.A,variant:"outlined",children:(0,B.jsx)(Y.A,{size:"small",children:(0,B.jsxs)(X.A,{children:[(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:"Calculation Method"}),(0,B.jsx)(Z.A,{align:"right",children:d})]}),(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:"Juristic Method (Asr)"}),(0,B.jsx)(Z.A,{align:"right",children:u})]}),(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:"High Latitude Adjustment"}),(0,B.jsx)(Z.A,{align:"right",children:m})]}),(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:"Midnight Mode"}),(0,B.jsx)(Z.A,{align:"right",children:p})]}),a.timezone&&(0,B.jsxs)(Q.A,{children:[(0,B.jsx)(Z.A,{component:"th",scope:"row",children:"Timezone"}),(0,B.jsx)(Z.A,{align:"right",children:a.timezone})]})]})})})]})})]})}));ee.displayName="PrayerTimesDisplay";const te=ee;var ne=n(9336),ae=n(6240);const ie=e=>{let{prayerTime:t,remaining:n,progress:i,prayerName:r,cityName:l,islamicDate:c,isCompact:d=!1,isNearPrayer:u=!1,clockSize:m=180}=e;const h=(0,ae.A)(),p=(0,a.useRef)(null),[x,g]=(0,a.useState)(new Date),[y,f]=(0,a.useState)(0),[A,j]=(0,a.useState)(-.1),[b,v]=(0,a.useState)(d?1:.8),w=(0,a.useRef)();(0,a.useEffect)((()=>{const e=setTimeout((()=>{f(1),j(0)}),100);if(!d){let e=1,t=1;const n=()=>{t>=1.2&&(e=-1),t<=.8&&(e=1),t+=.005*e,v(t),w.current=requestAnimationFrame(n)};w.current=requestAnimationFrame(n)}const t=d?null:setInterval((()=>{g(new Date)}),1e3);return()=>{clearTimeout(e),t&&clearInterval(t),w.current&&cancelAnimationFrame(w.current)}}),[d]),(0,a.useEffect)((()=>{const e=p.current;if(!e)return;const n=e.getContext("2d"),a=d?new Date(t):x,r=window.devicePixelRatio||1,o=m;e.width=o*r,e.height=o*r,n.scale(r,r),e.style.width=`${o}px`,e.style.height=`${o}px`,n.clearRect(0,0,e.width,e.height),S(n,o,a,h.palette.primary.main,h.palette.divider),k(n,o,i,h.palette.primary.main,h.palette.divider)}),[x,t,i,d,u,h,m]);const S=(e,t,n,a,i)=>{const r={x:t/2,y:t/2},o=t/2-.02*t,s=.02*t,l=.02*t,c=.01*t,u=.005*t;e.beginPath(),e.arc(r.x,r.y,o,0,2*Math.PI),e.strokeStyle=i,e.lineWidth=s,e.stroke();for(let d=0;d<12;d++){const n=d*Math.PI/6,i=d%3===0;e.beginPath(),e.strokeStyle=i?a:`${a}B3`,e.lineWidth=i?.015*t:.005*t;const s=i?.08*t:.04*t,l=r.x+(o-.04*t)*Math.cos(n),c=r.y+(o-.04*t)*Math.sin(n),u=r.x+(o-.04*t-s)*Math.cos(n),m=r.y+(o-.04*t-s)*Math.sin(n);e.moveTo(u,m),e.lineTo(l,c),e.stroke()}const m=n.getHours()%12,h=n.getMinutes(),p=(m+h/60)*Math.PI/6-Math.PI/2;e.beginPath(),e.lineWidth=l,e.strokeStyle=a,e.moveTo(r.x,r.y),e.lineTo(r.x+.4*o*Math.cos(p),r.y+.4*o*Math.sin(p)),e.stroke();const x=h*Math.PI/30-Math.PI/2;e.beginPath(),e.lineWidth=c,e.strokeStyle=a,e.moveTo(r.x,r.y),e.lineTo(r.x+.6*o*Math.cos(x),r.y+.6*o*Math.sin(x)),e.stroke();const g=n.getSeconds()*Math.PI/30-Math.PI/2;e.beginPath(),e.lineWidth=2*u,e.strokeStyle=`${a}4D`,e.lineCap="round",e.shadowColor=a,e.shadowBlur=.02*t,e.moveTo(r.x,r.y),e.lineTo(r.x+.7*o*Math.cos(g),r.y+.7*o*Math.sin(g)),e.stroke(),e.shadowBlur=0,e.beginPath(),e.lineWidth=u,e.strokeStyle=a,e.moveTo(r.x,r.y),e.lineTo(r.x+.7*o*Math.cos(g),r.y+.7*o*Math.sin(g)),e.stroke(),e.beginPath(),e.fillStyle=`${a}66`,e.shadowColor=a,e.shadowBlur=.02*t,e.arc(r.x,r.y,.02*t,0,2*Math.PI),e.fill(),e.shadowBlur=0,e.beginPath(),e.fillStyle=a,e.arc(r.x,r.y,d?.01*t:.015*t,0,2*Math.PI),e.fill()},k=(e,t,n,a,i)=>{const r={x:t/2,y:t/2},o=t/2-(d?.02*t:.04*t),s=d?.02*t:.04*t;e.beginPath(),e.arc(r.x,r.y,o,0,2*Math.PI),e.strokeStyle=`${i}1A`,e.lineWidth=s,e.stroke();const l=e.createLinearGradient(r.x-o,r.y,r.x+o,r.y);l.addColorStop(0,`${a}B3`),l.addColorStop(1,a),e.beginPath(),e.arc(r.x,r.y,o,-Math.PI/2,-Math.PI/2+2*Math.PI*n,!1),e.strokeStyle=l,e.lineWidth=s,e.lineCap="round",e.stroke()},M=e=>{const t=d?Math.min(Math.max(.09*m,9),14):Math.min(Math.max(.12*m,12),20),n=d?`${Math.min(Math.max(.01*m,2),4)}px ${Math.min(Math.max(.02*m,4),8)}px`:`${Math.min(Math.max(.013*m,3),6)}px ${Math.min(Math.max(.027*m,6),12)}px`,a=d?Math.min(Math.max(.01*m,2),4):Math.min(Math.max(.02*m,4),8);return(0,B.jsx)(o.A,{sx:{padding:n,backgroundColor:`${h.palette.primary.main}1A`,borderRadius:a,display:"inline-block"},children:(0,B.jsx)(s.A,{sx:{color:h.palette.text.primary,fontSize:t,fontWeight:"bold",lineHeight:1},children:String(e).padStart(2,"0")})})},E=d?new Date(t):x;return(0,B.jsxs)(o.A,{sx:{opacity:y,transform:`rotate(${A}deg) scale(${b})`,transition:"opacity 0.5s ease, transform 0.5s ease-out",position:"relative",width:m,height:m,margin:"0 auto"},children:[(0,B.jsx)("canvas",{ref:p,style:{position:"absolute",top:0,left:0,width:m,height:m}}),(0,B.jsxs)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",width:.8*m,maxWidth:"90%"},children:[!d&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.A,{variant:"caption",sx:{color:`${h.palette.text.secondary}B3`,fontSize:.045*m,display:"block"},children:c}),(0,B.jsx)(s.A,{variant:"caption",sx:{color:`${h.palette.text.secondary}B3`,fontSize:.055*m,fontWeight:500,display:"block",mb:.008*m},children:l})]}),(0,B.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[M(E.getHours()),(0,B.jsx)(s.A,{sx:{color:h.palette.text.primary,fontSize:d?.11*m:.14*m,mx:.5,lineHeight:1},children:":"}),M(E.getMinutes())]}),d?(0,B.jsx)(s.A,{variant:"body2",sx:{color:`${h.palette.text.primary}E6`,fontSize:.067*m,fontWeight:500,mt:.5},children:r}):(0,B.jsx)(s.A,{variant:"body2",sx:{color:`${h.palette.text.secondary}B3`,fontSize:.067*m,mt:.5},children:`${Math.floor(n/36e5)}h ${Math.floor(n%36e5/6e4)}m`})]})]})};var re=n(6293);const oe=e=>{let{targetTime:t,title:n,subtitle:i,description:r}=e;const l=(0,ae.A)(),c=(0,a.useRef)(null),[d,u]=(0,a.useState)(y()),[m,h]=(0,a.useState)(1),p=(0,re.A)(l.breakpoints.down("sm")),x=(0,re.A)(l.breakpoints.down("md")),g=(0,a.useRef)(null);function y(){const e=t-new Date;return e<=0?{hours:0,minutes:0,seconds:0,total:0}:{hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60),total:e}}(0,a.useEffect)((()=>{const e=setInterval((()=>{u(y())}),1e3);let t=1,n=1;const a=()=>{n>=1.05&&(t=-1),n<=.95&&(t=1),n+=.002*t,h(n),g.current=requestAnimationFrame(a)};return g.current=requestAnimationFrame(a),()=>{clearInterval(e),g.current&&cancelAnimationFrame(g.current)}}),[t]),(0,a.useEffect)((()=>{const e=c.current;if(!e)return;const t=p?240:300,n=e.getContext("2d"),a=window.devicePixelRatio||1;e.width=t*a,e.height=t*a,n.scale(a,a),e.style.width=`${t}px`,e.style.height=`${t}px`,n.clearRect(0,0,e.width,e.height);const i=3600*d.hours+60*d.minutes+d.seconds,r=Math.min(i/3600,1);f(n,t,r)}),[d,p]);const f=(e,t,n)=>{const a={x:t/2,y:t/2},i=t/2-10,r=p?6:8;e.beginPath(),e.arc(a.x,a.y,i,0,2*Math.PI),e.strokeStyle=`${l.palette.divider}4D`,e.lineWidth=r,e.stroke(),e.beginPath(),e.arc(a.x,a.y,i,-Math.PI/2,-Math.PI/2+2*Math.PI*n,!1);const o=e.createLinearGradient(a.x-i,a.y,a.x+i,a.y);o.addColorStop(0,l.palette.secondary.main),o.addColorStop(1,l.palette.primary.main),e.strokeStyle=o,e.lineWidth=r,e.lineCap="round",e.stroke();for(let s=0;s<12;s++){const t=s*Math.PI/6,n=s%3===0;e.beginPath(),e.strokeStyle=n?l.palette.primary.main:`${l.palette.primary.main}99`,e.lineWidth=n?3:1;const r=n?15:8,o=a.x+(i+5)*Math.cos(t),c=a.y+(i+5)*Math.sin(t),d=a.x+(i+5+r)*Math.cos(t),u=a.y+(i+5+r)*Math.sin(t);e.moveTo(o,c),e.lineTo(d,u),e.stroke()}},A=e=>e.toString().padStart(2,"0"),j=p?240:300,b={xs:p?38:x?42:58,sm:p?16:20,md:p?22:28};return(0,B.jsx)(S.A,{children:(0,B.jsxs)(E.A,{sx:{textAlign:"center",p:p?2:3},children:[n&&(0,B.jsx)(s.A,{variant:"h5",gutterBottom:!0,color:"primary",children:n}),i&&(0,B.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,color:"text.secondary",children:i}),(0,B.jsxs)(o.A,{sx:{position:"relative",width:j,height:j,margin:"0 auto",transform:`scale(${m})`,transition:"transform 0.2s ease-in-out"},children:[(0,B.jsx)("canvas",{ref:c,style:{position:"absolute",top:0,left:0}}),(0,B.jsxs)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",textAlign:"center"},children:[(0,B.jsxs)(s.A,{sx:{fontWeight:700,lineHeight:1.1,mb:1,fontSize:b.xs,fontFamily:"monospace",letterSpacing:"-0.05em"},children:[A(d.hours),":",A(d.minutes),":",A(d.seconds)]}),r&&(0,B.jsx)(s.A,{variant:"subtitle1",sx:{color:l.palette.text.secondary,mt:1,fontSize:b.sm},children:r})]})]})]})})};var se=n(2807);const le=()=>{const e=(0,ae.A)(),{prayerTimes:t,hijriDate:n,params:i,loading:r,fetchPrayerTimesByCoordinates:l}=(0,v.xn)(),[c,u]=(0,a.useState)(new Date),[m,p]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[y,f]=(0,a.useState)(0),[A,j]=(0,a.useState)("initial");if((0,a.useEffect)((()=>{console.log("Prayer Times State:",{prayerTimes:t,loading:r,nextPrayer:m,calculationState:A})}),[t,r,m,A]),(0,a.useEffect)((()=>{const e=setInterval((()=>{u(new Date)}),1e3);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{t||r||"function"!==typeof l||(console.log("No prayer times available, attempting to fetch..."),l())}),[t,r,l]),(0,a.useEffect)((()=>{if(t)try{j("calculating"),console.log("Starting prayer time calculation with:",t);const n=[{name:"Fajr",time:t.Fajr},{name:"Dhuhr",time:t.Dhuhr},{name:"Asr",time:t.Asr},{name:"Maghrib",time:t.Maghrib},{name:"Isha",time:t.Isha}];if(0===n.filter((e=>e.time&&"string"===typeof e.time)).length)return console.error("No valid prayer times found:",n),void j("no-valid-prayers");const a=c,i=a.getHours(),r=a.getMinutes(),o=60*i+r;console.log("Current time:",{currentHour:i,currentMinute:r,currentTotalMinutes:o});let s=null,l=null;for(const t of n)if(t.time)try{const[e,n]=t.time.split(":").map(Number);if(isNaN(e)||isNaN(n)){console.log(`Invalid time for ${t.name}: ${t.time}`);continue}const i=60*e+n;console.log(`Processing ${t.name}`,{time:t.time,prayerHour:e,prayerMinute:n,prayerTotalMinutes:i,isAfterCurrent:i>o}),i>o?(!s||i<s.totalMinutes)&&(s={...t,totalMinutes:i,dateTime:new Date(a.getFullYear(),a.getMonth(),a.getDate(),e,n)},console.log(`Found next prayer: ${t.name}`)):(!l||i>l.totalMinutes)&&(l={...t,totalMinutes:i},console.log(`Found previous prayer: ${t.name}`))}catch(e){console.error(`Error processing prayer ${t.name}:`,e)}else console.log(`Skipping prayer ${t.name}, no time available`);if(s&&!l){console.log("Found next prayer but no previous prayer, creating synthetic previous...");const e=["Fajr","Dhuhr","Asr","Maghrib","Isha"],t=s.name.replace(" (Tomorrow)",""),a=e.indexOf(t),i=a>0?a-1:e.length-1,r=e[i],o=n.find((e=>e.name===r));if(o&&o.time){const[e,t]=o.time.split(":").map(Number);isNaN(e)||isNaN(t)||(l={...o,totalMinutes:60*e+t},console.log(`Created synthetic previous prayer: ${r}`))}else if(!l)for(let s=e.length-1;s>=0;s--){const t=n.find((t=>t.name===e[s]));if(t&&t.time){const[e,n]=t.time.split(":").map(Number);if(!isNaN(e)&&!isNaN(n)){l={...t,totalMinutes:60*e+n},console.log(`Created alternate previous prayer: ${t.name}`);break}}}}if(!s&&n[0].time)try{const e=n[0],[t,i]=e.time.split(":").map(Number);if(isNaN(t)||isNaN(i))console.error("Invalid Fajr time format:",e.time);else{const r=new Date(a);if(r.setDate(r.getDate()+1),r.setHours(t,i,0,0),s={...e,name:"Fajr (Tomorrow)",totalMinutes:60*t+i,dateTime:r},console.log("Set next prayer to tomorrow's Fajr"),!l&&n[4].time){const[e,t]=n[4].time.split(":").map(Number);isNaN(e)||isNaN(t)||(l={...n[4],totalMinutes:60*e+t},console.log("Set previous prayer to today's Isha"))}}}catch(e){console.error("Error setting tomorrow's Fajr:",e)}if(s)try{if(p(s),s.dateTime){const e=s.dateTime-a;g(e)}if(l){const e=s.totalMinutes-l.totalMinutes+(s.name&&s.name.includes("Tomorrow")?1440:0);let t;t=l.totalMinutes>s.totalMinutes&&!s.name.includes("Tomorrow")?o-l.totalMinutes+1440:l.totalMinutes>o&&s.name.includes("Tomorrow")?o+1440-l.totalMinutes:o-l.totalMinutes;const n=Math.min(Math.max(t/e,0),1);console.log("Final calculation results:",{msUntilNextPrayer:s.dateTime-a,totalInterval:e,elapsed:t,calculatedProgress:n}),f(n),j("complete")}else console.log("Missing previous prayer, using default progress"),f(.5),j("partial-data")}catch(e){console.error("Error in prayer time calculation:",e),j("calculation-error"),m||(p(s),s.dateTime&&g(s.dateTime-a),f(.5))}else j("no-next-prayer"),console.error("No next prayer could be determined")}catch(n){if(console.error("Error calculating prayer times:",n),j("error"),t&&t.Fajr){const[e,n]=t.Fajr.split(":").map(Number);if(!isNaN(e)&&!isNaN(n)){const a=new Date;a.setHours(e,n,0,0),a<c&&a.setDate(a.getDate()+1),p({name:"Fajr",time:t.Fajr,dateTime:a}),g(a-c),f(.5),console.log("Using fallback values after error")}}}else console.log("No prayer times data available")}),[t,c]),!t)return(0,B.jsxs)(V.A,{elevation:3,sx:{p:4,textAlign:"center",mb:4},children:[(0,B.jsx)(s.A,{variant:"h6",color:"text.secondary",children:r?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h.A,{size:24,sx:{mr:2,verticalAlign:"middle"}}),"Loading prayer times..."]}):"Prayer times not available"}),!r&&(0,B.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Please set your location to view prayer times."})]});if(!m)return(0,B.jsxs)(V.A,{elevation:3,sx:{p:4,textAlign:"center",mb:4},children:[(0,B.jsx)(h.A,{size:24,sx:{mr:2,verticalAlign:"middle"}}),(0,B.jsxs)(s.A,{variant:"h6",color:"text.secondary",children:["Calculating prayer times... (",A,")"]}),(0,B.jsx)(s.A,{variant:"body2",color:"error",sx:{mt:2},children:"Debug info: Prayer data received but calculation incomplete. Check console for details."})]});const b=n?`${n.day} ${n.month.en} ${n.year} AH`:"",w=i.address||`${i.latitude.toFixed(4)}\xb0, ${i.longitude.toFixed(4)}\xb0`,k=[{name:"Fajr",time:t.Fajr,icon:"\ud83c\udf05"},{name:"Sunrise",time:t.Sunrise,icon:"\u2600\ufe0f"},{name:"Dhuhr",time:t.Dhuhr,icon:"\ud83c\udf1e"},{name:"Asr",time:t.Asr,icon:"\ud83c\udf07"},{name:"Maghrib",time:t.Maghrib,icon:"\ud83c\udf06"},{name:"Isha",time:t.Isha,icon:"\ud83c\udf19"}].filter((e=>e&&e.time));return(0,B.jsxs)(o.A,{sx:{mb:4},children:[(0,B.jsxs)(d.Ay,{container:!0,spacing:4,children:[(0,B.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,B.jsx)(oe,{targetTime:m.dateTime,title:`${m.name} Prayer`,subtitle:`at ${(0,se.MG)(m.time)}`,description:w})}),(0,B.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,B.jsx)(S.A,{children:(0,B.jsxs)(E.A,{sx:{textAlign:"center"},children:[(0,B.jsx)(s.A,{variant:"h5",color:"primary",gutterBottom:!0,children:"Next Prayer"}),(0,B.jsx)(o.A,{sx:{maxWidth:315,mx:"auto",my:2},children:(0,B.jsx)(ie,{prayerTime:m.dateTime,remaining:x,progress:y,prayerName:m.name,cityName:w,islamicDate:b,isCompact:!1,isNearPrayer:x<18e5,clockSize:315})})]})})})]}),(0,B.jsx)(ne.A,{sx:{my:4}}),(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{color:e.palette.primary.main,mb:3},children:"Today's Prayer Times"}),(0,B.jsxs)(d.Ay,{container:!0,spacing:2,children:[" ",k.map((t=>{try{if(!t.time)return null;const n=["Fajr","Dhuhr","Asr","Maghrib","Isha"].includes(t.name),[a,i]=t.time.split(":").map(Number);if(isNaN(a)||isNaN(i))return null;const r=new Date;r.setHours(a,i,0,0);const l=r<c,u=(null===m||void 0===m?void 0:m.name)===t.name||"Fajr (Tomorrow)"===(null===m||void 0===m?void 0:m.name)&&"Fajr"===t.name;return(0,B.jsx)(d.Ay,{item:!0,xs:6,sm:6,md:4,children:(0,B.jsx)(S.A,{sx:{height:"100%",textAlign:"center",transform:u?"scale(1.05)":"scale(1)",transition:"transform 0.3s ease",opacity:l&&!u?.7:1,border:u?`1px solid ${e.palette.secondary.main}`:"none",boxShadow:u?3:1,bgcolor:n?"background.paper":"background.default",p:{xs:1,sm:2},overflow:"visible",boxSizing:"border-box",mx:"auto"},children:(0,B.jsxs)(E.A,{sx:{p:{xs:.5,sm:1},"&:last-child":{pb:{xs:.5,sm:1}},display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,B.jsxs)(s.A,{variant:"subtitle2",sx:{mb:.5,fontWeight:"medium",fontSize:{xs:"0.7rem",sm:"0.9rem"}},children:[t.icon," ",t.name]}),(0,B.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",width:"100%",transform:{xs:"scale(0.8)",sm:"scale(1)"}},children:(0,B.jsx)(ie,{prayerTime:r,remaining:0,progress:0,prayerName:t.name,cityName:"",islamicDate:"",isCompact:!0,isNearPrayer:u,clockSize:170})}),(0,B.jsx)(s.A,{sx:{mt:.5,fontSize:{xs:"0.8rem",sm:"1rem"},color:u?e.palette.secondary.main:e.palette.text.primary,fontWeight:u?700:500},children:(0,se.MG)(t.time)})]})})},t.name)}catch(n){return console.error(`Error rendering prayer: ${t.name}`,n),null}}))]})]})};var ce=n(9423),de=n(6918),ue=n(7561),me=n(3389),he=n(2308);const pe=()=>{const e=(0,ae.A)(),{prayerTimes:t}=(0,v.xn)(),[n,i]=(0,a.useState)(new Date),[r,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(-1),[u,m]=(0,a.useState)(0);(0,a.useEffect)((()=>{const e=setInterval((()=>{i(new Date)}),6e4);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{if(!t)return;const e=[{key:"Imsak",name:"Imsak",isPrayer:!1,icon:(0,B.jsx)(ue.A,{fontSize:"small"})},{key:"Fajr",name:"Fajr",isPrayer:!0,icon:(0,B.jsx)(ue.A,{fontSize:"small"})},{key:"Sunrise",name:"Sunrise",isPrayer:!1,icon:(0,B.jsx)(me.A,{fontSize:"small"})},{key:"Dhuhr",name:"Dhuhr",isPrayer:!0,icon:(0,B.jsx)(ce.A,{fontSize:"small"})},{key:"Asr",name:"Asr",isPrayer:!0,icon:(0,B.jsx)(ce.A,{fontSize:"small"})},{key:"Maghrib",name:"Maghrib",isPrayer:!0,icon:(0,B.jsx)(ue.A,{fontSize:"small"})},{key:"Isha",name:"Isha",isPrayer:!0,icon:(0,B.jsx)(de.A,{fontSize:"small"})},{key:"Midnight",name:"Midnight",isPrayer:!1,icon:(0,B.jsx)(de.A,{fontSize:"small"})},{key:"Firstthird",name:"1st Third",isPrayer:!1,icon:(0,B.jsx)(de.A,{fontSize:"small"})},{key:"Lastthird",name:"Last Third",isPrayer:!1,icon:(0,B.jsx)(de.A,{fontSize:"small"})}],n=[];e.forEach((e=>{if(t[e.key]){const[a,i]=t[e.key].split(":").map(Number);let r=new Date;if("Midnight"===e.key||"Firstthird"===e.key||"Lastthird"===e.key){parseInt(a)<6&&r.setDate(r.getDate()+1)}r.setHours(a,i,0,0),n.push({name:e.name,key:e.key,time:r,formattedTime:(0,se.MG)(t[e.key]),isPrayer:e.isPrayer,icon:e.icon})}}));const a=n.sort(((e,t)=>e.time-t.time));l(a)}),[t]),(0,a.useEffect)((()=>{if(!r.length)return;const e=n,t=new Date(e);t.setHours(0,0,0,0);const a=new Date(e);a.setHours(23,59,59,999);const i=a-t,o=e-t,s=100*Math.min(o/i,1);m(s);let l=-1;for(let n=r.length-1;n>=0;n--)if(r[n].time<=e){l=n;break}d(l)}),[r,n]);return t&&0!==r.length?(0,B.jsx)(S.A,{sx:{mb:4},children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Daily Prayer Timeline"}),(0,B.jsxs)(V.A,{elevation:0,sx:{position:"relative",height:180,p:3,backgroundColor:e.palette.background.default},children:[(0,B.jsxs)(o.A,{sx:{position:"relative",height:4,backgroundColor:e.palette.divider,mt:6,borderRadius:2,overflow:"visible"},children:[(0,B.jsx)(he.P.div,{initial:{width:0},animate:{width:`${u}%`},transition:{type:"spring",stiffness:80,damping:20},style:{position:"absolute",height:"100%",backgroundColor:e.palette.primary.main,borderRadius:8,opacity:.7}}),(0,B.jsx)(he.P.div,{initial:!1,animate:{left:`${u}%`},transition:{type:"spring",stiffness:80,damping:20},style:{position:"absolute",height:16,width:16,backgroundColor:e.palette.secondary.main,borderRadius:"50%",top:"50%",transform:"translate(-50%, -50%)",boxShadow:`0 0 0 4px ${e.palette.background.paper}`,zIndex:10},children:(0,B.jsx)(he.P.div,{initial:{scale:1,opacity:.7},animate:{scale:[1,1.5,1],opacity:[.7,0,.7]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:"50%",left:"50%",width:32,height:32,borderRadius:"50%",backgroundColor:e.palette.secondary.main,opacity:.5,transform:"translate(-50%, -50%)",zIndex:1}})}),r.map(((t,i)=>{const r=(3600*t.time.getHours()+60*t.time.getMinutes())/86400*100,l=i===c,d=((t,n,a)=>a?e.palette.secondary.main:n?e.palette.success.main:"Sunrise"===t.key?e.palette.warning.main:t.isPrayer?e.palette.primary.main:"Imsak"===t.key?e.palette.info.main:(["Midnight","Firstthird","Lastthird"].includes(t.key),e.palette.text.secondary))(t,t.time<n,l),u=i%2===0;let m;return m="Imsak"===t.key?15:"Sunrise"===t.key||u?-35:15,(0,B.jsxs)(a.Fragment,{children:[(0,B.jsx)(he.P.div,{initial:{scale:0,opacity:0},animate:{left:`${r}%`,scale:l?1.3:1,opacity:1,boxShadow:l||t.isPrayer?`0 0 12px 4px ${d}`:"none"},transition:{type:"spring",stiffness:120,damping:15},style:{position:"absolute",height:t.isPrayer?14:10,width:t.isPrayer?14:10,backgroundColor:d,border:l?`3px solid ${e.palette.secondary.main}`:"none",borderRadius:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:l?5:1},children:t.isPrayer&&(0,B.jsx)(he.P.div,{initial:{scale:1,opacity:.7},animate:{scale:[1,1.7,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:"50%",left:"50%",width:32,height:32,borderRadius:"50%",backgroundColor:d,opacity:.4,transform:"translate(-50%, -50%)",zIndex:0}})}),(0,B.jsxs)(he.P.div,{initial:{opacity:0,y:u?-10:10},animate:{left:`${r}%`,opacity:1,y:0,scale:l?1.05:1},transition:{type:"spring",stiffness:100,damping:18},style:{position:"absolute",top:m+(u?-16:16),transform:"translateX(-50%)",textAlign:"center",minWidth:70,backgroundColor:u||"Sunrise"===t.key?e.palette.background.default:"transparent",borderRadius:4,padding:"2px 4px",border:l?`1px solid ${e.palette.secondary.main}`:u||"Sunrise"===t.key?`1px solid ${e.palette.divider}`:"none",zIndex:l?5:"Imsak"===t.key||"Sunrise"===t.key?3:2},children:[(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",color:l?d:"inherit",mb:.5},children:[t.icon&&(0,B.jsx)(o.A,{component:"span",sx:{mr:.5,color:d,display:"flex"},children:t.icon}),(0,B.jsx)(s.A,{variant:"caption",component:"span",sx:{fontWeight:l?"bold":"normal",whiteSpace:"nowrap",fontSize:l?"0.85rem":"0.75rem"},children:t.name})]}),(0,B.jsx)(s.A,{variant:"caption",sx:{color:l?d:e.palette.text.secondary,fontSize:l?"0.8rem":"0.75rem",display:"block",lineHeight:1.2},children:t.formattedTime})]})]},t.key)}))]}),(0,B.jsx)(he.P.div,{initial:!1,animate:{left:`${u}%`},transition:{type:"spring",stiffness:80,damping:20},style:{position:"absolute",bottom:10,transform:"translateX(-50%)",textAlign:"center",minWidth:70,zIndex:5},children:(0,B.jsx)(s.A,{variant:"caption",sx:{backgroundColor:e.palette.background.paper,px:1.5,py:.5,borderRadius:1,color:e.palette.secondary.main,display:"inline-block",boxShadow:1,fontWeight:"medium"},children:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]}),(0,B.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",gap:2,mt:2,flexWrap:"wrap"},children:[(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.primary.main,mr:1}}),(0,B.jsx)(s.A,{variant:"caption",children:"Prayers"})]}),(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.info.main,mr:1}}),(0,B.jsx)(s.A,{variant:"caption",children:"Imsak"})]}),(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.warning.main,mr:1}}),(0,B.jsx)(s.A,{variant:"caption",children:"Sunrise"})]}),(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.text.secondary,mr:1}}),(0,B.jsx)(s.A,{variant:"caption",children:"Night times"})]})]})]})}):null};var xe=n(2040),ge=n(7739),ye=n(7392),fe=n(7629),Ae=n(1673),je=n(9413),be=n(1962),ve=n(8446),we=n(5007),Se=n(1582),ke=n(7173),Me=n(4469),Ee=n(9704),Ie=n(5310),Pe=n(853),Ne=n(4241);const Ce=[{id:"makkah",name:"Makkah - Sheikh Ali Mulla",url:"https://praytimes.org/audio/adhan/Sunni/Adhan%20Makkah.mp3"},{id:"madinah",name:"Madinah - Athan",url:"https://praytimes.org/audio/adhan/Sunni/Adhan%20Madina.mp3"},{id:"egyptian",name:"Egyptian - Sheikh Mohammed Rifat",url:"https://praytimes.org/audio/adhan/Sunni/Adhan%20Egypt.mp3"},{id:"abdulbasit",name:"Egyptian - Abdul Basit",url:"https://praytimes.org/audio/adhan/Sunni/Abdul-Basit.mp3"},{id:"hafez",name:"Hafez",url:"https://praytimes.org/audio/adhan/Sunni/Hafez.mp3"},{id:"mansour",name:"Mansour Zahrani",url:"https://dl.dropboxusercontent.com/scl/fi/lb57ysf7u4ss43pdxye3c/mansour_al_zahrani.mp3?rlkey=3wmv9aba0eb4rwiu58fva0iy0&st=sc8yfbzh&dl=1"},{id:"mansour-fajr",name:"Mansour Zahrani Fajr",url:"https://archive.org/download/adhan_fajr_mansour_zahrani/adhan_fajr_mansour_zahrani.mp3"},{id:"naseer-alqatami",name:"Naseer Al Qatami",url:"https://download.tvquran.com/download/TvQuran.com__Athan/TvQuran.com__08.athan.mp3"},{id:"ahmad-al-nafees",name:"Ahmad Al Nafees",url:"https://dl.dropboxusercontent.com/scl/fi/3jiy3o1hx19rss0hc9je7/ahmad_al_nafees.mp3?rlkey=doljk0aon9gdqt3tiayr1hgtu&st=naujvp66&dl=1"},{id:"hafiz-mustfa-ozcan",name:"Hafiz Mustfa Ozcan",url:"https://dl.dropboxusercontent.com/scl/fi/fd2tmxv0v84qnlobeqmhp/hafiz_mustafa_ozcan.mp3?rlkey=i0ao0cr1t0zosb37lc83hqhjh&st=knjy3z9q&dl=1"},{id:"karl-jenkins",name:"Karl Jenkins",url:"https://dl.dropboxusercontent.com/scl/fi/vlxw4ue8wos0sujhucfqi/karl_jenkins_mass.mp3?rlkey=9ca7gmildknq3vjqupguwh4cx&st=yni4511s&dl=1"},{id:"rashid-alafasy",name:"Mishary Rashid Alafasy",url:"https://dl.dropboxusercontent.com/scl/fi/di43o6wudlbqy04pg6vl3/mishary_rashid_alafassay.mp3?rlkey=0fszlwrb291xwaoxit8yo8trk&st=4i8wbuhk&dl=1"},{id:"rashid-alafasy-dubai",name:"Mishary Rashid Alafasy Dubai",url:"https://dl.dropboxusercontent.com/scl/fi/rfbkqp8b4o45pjuk679qo/mishary_rashid_dubai.mp3?rlkey=bsp0f4jbrbdzl3ecgq0tujpe9&st=8xcbvone&dl=1"}],Te={athanEnabled:!0,selectedAthan:"makkah",volume:70,notificationsEnabled:!0,selectedPrayers:{Fajr:!0,Dhuhr:!0,Asr:!0,Maghrib:!0,Isha:!0},preAthanNotification:10},De=()=>{const e=(0,ae.A)(),{prayerTimes:t,params:n}=(0,v.xn)(),[i,r]=(0,a.useState)((()=>{const e=localStorage.getItem("athanSettings");return e?JSON.parse(e):Te})),[u,m]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[f,A]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[k,M]=(0,a.useState)(null),[P,N]=(0,a.useState)(null),[C,T]=(0,a.useState)(!1),[D,$]=(0,a.useState)(""),[R,F]=(0,a.useState)(!1),[z,W]=(0,a.useState)(0),[L,_]=(0,a.useState)(null),O=(0,a.useRef)(null),U=(0,a.useRef)(null),J=(0,a.useRef)({}),Y=(0,a.useRef)(null),K=(0,a.useRef)(null),Q=(0,a.useRef)(Date.now()),[Z,X]=(0,a.useState)("Notification"in window?Notification.permission:"denied"),[ee,te]=(0,a.useState)(null),ne=()=>new Promise((e=>{const t=window.indexedDB.open("test");t.onerror=()=>e(!0),t.onsuccess=()=>e(!1),setTimeout((()=>e(!1)),1e3)})),ie=async()=>{if(!("Notification"in window))return $("This browser does not support notifications"),T(!0),!1;try{console.log("Requesting notification permission...");if(await ne())return $("You appear to be in private browsing mode. Please enable notifications manually in your browser settings."),T(!0),setTimeout((()=>{alert("In private/incognito mode, you need to manually allow notifications:\n\n1. Look for the notification icon in the address bar\n2. Click it and select 'Allow' for notifications\n3. Reload the page after changing the setting")}),500),!1;const e=await Notification.requestPermission();return console.log("Permission result:",e),X(e),"granted"===e?(r((e=>({...e,notificationsEnabled:!0}))),$("Notifications enabled successfully!"),T(!0),!0):("denied"===e?($("Notification permission was denied. You'll need to enable it in your browser settings."),T(!0)):($("Notification permission wasn't granted. Some features may not work."),T(!0)),!1)}catch(e){return console.error("Error requesting notification permission:",e),$("Error requesting notification permission. Please try again."),T(!0),!1}},re=()=>{const e=Date.now();if(!(e-Q.current<200)&&(Q.current=e,"visible"===document.visibilityState)){if(console.log("Tab became visible, updating timers"),"undefined"!==typeof AudioContext)try{const e=new AudioContext;"suspended"===e.state&&e.resume().then((()=>{console.log("AudioContext resumed successfully")}))}catch(t){console.error("Error resuming audio context:",t)}if("true"===sessionStorage.getItem("athan_simulation_completed")){const e=new Date(sessionStorage.getItem("athan_simulation_time")||0),t=new Date-e;if(!isNaN(t)&&t<3e5){console.log("\ud83d\udd04 Detected simulation completion while page was inactive"),sessionStorage.removeItem("athan_simulation_completed"),sessionStorage.removeItem("athan_simulation_time"),$("A timer completed while you were away. Play Athan now?");const e=()=>(0,B.jsxs)(xe.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,B.jsx)(s.A,{children:D}),(0,B.jsx)(c.A,{variant:"contained",size:"small",color:"primary",onClick:()=>{le(),T(!1)},children:"Play Now"})]});_((0,B.jsx)(e,{})),T(!0)}}if(R&&K.current){const e=Math.round(K.current.diff(Ne.c9.now()).as("seconds"));e<=0?(clearInterval(Y.current),Y.current=null,F(!1),W(0),setTimeout((()=>{console.log("Simulation completed while tab was inactive - triggering Athan now"),k&&(le(!0),de(`Simulated: It's time for ${k.name} prayer`))}),100)):W(e)}oe()}};(0,a.useEffect)((()=>{if(!O.current){O.current=new Audio,O.current.addEventListener("ended",(()=>{console.log("Audio playback ended"),m(!1)})),O.current.addEventListener("error",(e=>{console.error("Audio error:",e),m(!1);let t="Error loading audio. Please try another Athan.";if(O.current.error)switch(O.current.error.code){case MediaError.MEDIA_ERR_ABORTED:t="Audio playback aborted.";break;case MediaError.MEDIA_ERR_NETWORK:t="Network error. Check your internet connection.";break;case MediaError.MEDIA_ERR_DECODE:t="Audio decoding error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Audio format not supported."}A(t)})),O.current.addEventListener("canplaythrough",(()=>{console.log("Audio can play through"),y(!1)})),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Athan - Islamic Call to Prayer",artist:"Salat-e-Mustaqeem",album:"Prayer Times App",artwork:[{src:"/favicon.ico",sizes:"96x96",type:"image/png"}]})),O.current.preload="none",O.current.autoplay=!1,O.current.src="",O.current.volume=i.volume/100;const e=()=>{console.log("User interaction detected - can now enable audio"),document.removeEventListener("click",e),document.removeEventListener("touchstart",e);try{const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume()}catch(t){console.error("Error creating temporary audio context:",t)}};document.addEventListener("click",e),document.addEventListener("touchstart",e)}return"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("Service Worker registered with scope:",e.scope)})).catch((e=>{console.error("Service Worker registration failed:",e)}))})),O.current&&(O.current.volume=i.volume/100),document.addEventListener("visibilitychange",re),()=>{O.current&&O.current.pause(),document.removeEventListener("visibilitychange",re)}}),[]),(0,a.useEffect)((()=>{if(O.current){const e=Ce.find((e=>e.id===i.selectedAthan));e&&!u&&(console.log(`Selected Athan source: ${e.name}`),O.current.preload="none",O.current.src=e.url)}}),[i.selectedAthan]),(0,a.useEffect)((()=>{O.current&&(O.current.volume=i.volume/100)}),[i.volume]),(0,a.useEffect)((()=>{localStorage.setItem("athanSettings",JSON.stringify(i))}),[i]);const oe=()=>{if(!t)return;const e=new Date,n={};["Fajr","Dhuhr","Asr","Maghrib","Isha"].forEach((a=>{if(t[a]){const[i,r]=t[a].split(":").map(Number),o=new Date;o.setHours(i,r,0,0),o<e&&e-o>18e5&&o.setDate(o.getDate()+1),n[a]=o}}));let a=null,r=null;const o=Object.keys(n).sort(((e,t)=>n[e]-n[t]));for(let t=0;t<o.length;t++){const i=o[t],s=n[i];if(!(s<=e)){r={name:i,time:s};break}a={name:i,time:s}}if(!r&&o.length>0){const e=o[0],t=new Date(n[e]);t.setDate(t.getDate()+1),r={name:e,time:t}}if(r){const t=r.time-e,n=Math.floor(t/6e4);console.log(`Next prayer: ${r.name} in ${n} minutes`)}if(w(a),M(r),r){const t=r.time-e;if(N(t),i.notificationsEnabled&&i.selectedPrayers[r.name]&&"granted"===Z){const t=r.time.getTime()-60*i.preAthanNotification*1e3-e.getTime();t>0&&(J.current[r.name]&&clearTimeout(J.current[r.name]),J.current[r.name]=setTimeout((()=>{de(`${r.name} prayer in ${i.preAthanNotification} minutes`)}),t))}}};(0,a.useEffect)((()=>{if(t)return oe(),U.current=setInterval(oe,6e4),()=>{clearInterval(U.current),Object.values(J.current).forEach((e=>{clearTimeout(e)})),Y.current&&clearInterval(Y.current)}}),[t,i,Z]),(0,a.useEffect)((()=>{if(!k||!i.athanEnabled||!t)return;if(!i.selectedPrayers[k.name])return;const e=`played_${k.name}_${k.time.toISOString().split("T")[0]}`,n="true"===localStorage.getItem(e),a=new Date,r=Math.floor((k.time-a)/1e3);r>=0&&r<=60&&!u&&!n&&(console.log(`It's time for ${k.name} prayer, playing Athan...`),le(),de(`It's time for ${k.name} prayer`),localStorage.setItem(e,"true"),setTimeout((()=>{localStorage.removeItem(e)}),12e4))}),[t,P,k,i.athanEnabled,i.selectedPrayers,u]),(0,a.useEffect)((()=>{let e=null;try{"undefined"!==typeof Worker&&(e=new Worker("/timer.worker.js"),e.onmessage=e=>{const t=e.data;"tick"===t.type?W(t.remaining):"complete"===t.type?(console.log("\u26a1 WebWorker timer complete"),F(!1),W(0),sessionStorage.setItem("athan_simulation_completed","true"),sessionStorage.setItem("athan_simulation_time",(new Date).toString()),setTimeout((()=>{k&&de(`Simulated: It's time for ${k.name} prayer`),ue()}),100)):"pong"===t.type?(console.log("\ud83d\udce1 Worker communication test successful"),$("Web Worker communication successful!"),T(!0)):"stopped"===t.type&&(console.log("\u23f9\ufe0f Timer stopped by request"),F(!1))},e.onerror=e=>{console.error("\u274c Web Worker error:",e),$("Timer error: "+e.message),T(!0)},te(e),console.log("\ud83d\ude80 Web Worker initialized successfully"))}catch(t){console.error("Failed to initialize Web Worker:",t)}return()=>{if(e)try{e.terminate(),console.log("Web Worker terminated")}catch(t){console.error("Error terminating worker:",t)}}}),[]),(0,a.useEffect)((()=>(document.addEventListener("visibilitychange",re),()=>{document.removeEventListener("visibilitychange",re)})),[]);const se=()=>{const e=new Audio;e.src="data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ4AAAAAAA==",e.volume=i.volume/100,console.log("Trying fallback audio"),e.play().then((()=>{console.log("Fallback audio playing successfully"),k&&de(`It's time for ${k.name} prayer`)})).catch((e=>{console.error("Even fallback audio failed:",e)}))},le=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log("Playing Athan"+(e?" (triggered by timer)":"")),!O.current)return void A("Audio player not initialized. Please reload the page.");A(null),y(!0);const t=k?k.name:null;console.log(`Current prayer context: ${t||"none"}`);const n="Fajr"===t?"mansour-fajr":i.selectedAthan;console.log(`Selected athan ID: ${n}`);const a=Ce.find((e=>e.id===n));if(!a)return A("Selected Athan not found. Please choose a different one."),void y(!1);console.log(`Playing athan: ${a.name} (${a.url})`);const r=new(window.AudioContext||window.webkitAudioContext);O.current.src=a.url,O.current.preload="auto",O.current.load();let o=0;const s=e?5:3,l=()=>{if(console.log(`Attempting to play Athan (attempt ${o+1})`),e&&o>0){const e=r.createBufferSource();e.start(),e.stop(),"mediaSession"in navigator&&navigator.mediaSession.setActionHandler("play",(()=>{O.current.play()}))}"suspended"===r.state&&r.resume();let n=null;if(r.createMediaElementSource(O.current).connect(r.destination),i.notificationsEnabled&&"granted"===Z)try{new Notification("Salat-e-Mustaqeem",{body:`It's time for ${t||"prayer"}`,icon:"/favicon.ico",tag:"athan-notification",requireInteraction:!0}).onclick=()=>{window.focus(),O.current&&O.current.play().catch((e=>console.error("Error playing after notification click:",e)))},n=new Audio(a.url),n.volume=i.volume/100,n.play().catch((e=>console.error("Notification audio playback failed:",e)))}catch(c){console.error("Error showing notification:",c)}O.current.play().then((()=>{m(!0),y(!1),console.log("Athan playing successfully")})).catch((t=>{if(console.error(`Error playing Athan (attempt ${o+1}):`,t),o++,o<s){setTimeout(l,e?1500:1e3)}else m(!1),y(!1),A(`Unable to play audio after ${s} attempts. Please check your connection or try another Athan.`),n?n.play().catch((e=>console.error("Backup audio also failed:",e))):se(),e&&k&&de(`It's time for ${k.name} prayer (audio playback failed)`)}))};l()},ce=()=>{O.current&&(O.current.pause(),m(!1))},de=e=>{if("granted"===Z&&i.notificationsEnabled)try{const t=new Notification("Salat-e-Mustaqeem",{body:e,icon:"/favicon.ico"});setTimeout((()=>t.close()),1e4)}catch(t){console.error("Error showing notification:",t),$(e),T(!0)}},ue=()=>{try{console.log("Attempting to play Athan after timer completion"),le();const e=(0,B.jsx)(c.A,{variant:"contained",color:"primary",size:"small",onClick:()=>{le(),T(!1)},children:"Play Again"});$("Timer complete! Click to play Athan"),_(e),T(!0)}catch(e){console.error("Error in timer completion:",e);const t=(0,B.jsx)(c.A,{variant:"contained",color:"secondary",size:"small",onClick:()=>{le(),T(!1)},children:"Play Now"});$("Couldn't play automatically"),_(t),T(!0)}};return(0,B.jsx)(S.A,{sx:{mb:4,borderRadius:2,boxShadow:3},children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"medium"},children:"Athan Player"}),(0,B.jsx)(S.A,{sx:{mb:4,overflow:"visible"},children:(0,B.jsxs)(E.A,{children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{color:e.palette.primary.main},children:"Next Prayer"}),(0,B.jsx)(o.A,{sx:{textAlign:"center",py:2},children:(0,B.jsxs)(o.A,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:250,width:"100%",mb:2},children:[(0,B.jsx)(o.A,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:220,height:220,borderRadius:"100%",background:`\n                                            radial-gradient(closest-side, ${e.palette.background.paper} 79%, transparent 80% 100%),\n                                            conic-gradient(${e.palette.primary.main} ${P?100*(1-P/108e5):0}%, ${e.palette.divider} 0)\n                                        `,boxShadow:3},children:(0,B.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"85%"},children:[(0,B.jsx)(s.A,{variant:"h6",component:"div",color:"primary.main",sx:{fontWeight:"bold"},children:(null===k||void 0===k?void 0:k.name)||"Next Prayer"}),(0,B.jsx)(s.A,{variant:"h2",component:"div",sx:{fontFamily:"monospace",fontWeight:"bold",fontSize:{xs:"2.5rem",sm:"2.0rem"},letterSpacing:1,my:1,color:e.palette.secondary.main},children:(()=>{if(!P)return"00:00:00";const e=Math.floor(P/1e3),t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})()}),n&&n.address&&(0,B.jsx)(s.A,{variant:"body2",color:"text.secondary",noWrap:!0,sx:{maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden"},children:n.address})]})}),(0,B.jsx)(o.A,{sx:{mt:2,width:"100%"},children:(0,B.jsxs)(d.Ay,{container:!0,spacing:2,justifyContent:"center",children:[b&&(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsxs)(V.A,{variant:"outlined",sx:{px:2,py:.5,borderRadius:2,display:"flex",alignItems:"center"},children:[(0,B.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:"Current:"}),(0,B.jsx)(s.A,{variant:"body2",fontWeight:"medium",color:"primary",children:b.name})]})}),k&&(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsxs)(V.A,{variant:"outlined",sx:{px:2,py:.5,borderRadius:2,display:"flex",alignItems:"center",borderColor:e.palette.secondary.main},children:[(0,B.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:"At:"}),(0,B.jsx)(s.A,{variant:"body2",fontWeight:"medium",color:"secondary",children:k.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})]})})]})})]})}),(()=>{return f?(0,B.jsx)(l.A,{severity:"error",variant:"filled",sx:{mt:1,mb:2,borderRadius:1.5},children:f}):g?(0,B.jsx)(l.A,{severity:"info",variant:"filled",icon:(0,B.jsx)(h.A,{size:20,color:"inherit"}),sx:{mt:1,mb:2,borderRadius:1.5},children:"Loading audio..."}):u?(0,B.jsxs)(l.A,{severity:"success",variant:"filled",sx:{mt:1,mb:2,borderRadius:1.5},children:["Playing ",(null===(e=Ce.find((e=>e.id===i.selectedAthan)))||void 0===e?void 0:e.name)||"Athan"]}):null;var e})(),(0,B.jsxs)(V.A,{variant:"outlined",sx:{p:2,mb:3,borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,B.jsx)(p.A,{control:(0,B.jsx)(x.A,{checked:i.athanEnabled,onChange:()=>{r((e=>({...e,athanEnabled:!e.athanEnabled}))),u&&i.athanEnabled&&ce()},color:"primary"}),label:i.athanEnabled?"Athan Enabled":"Athan Disabled"}),(0,B.jsx)(c.A,{variant:"contained",color:u?"secondary":"primary",startIcon:u?(0,B.jsx)(Ee.A,{}):(0,B.jsx)(Me.A,{}),onClick:()=>{if(u)ce();else{if(!O.current)return void A("Audio player not initialized. Please reload the page.");A(null),y(!0),console.log("Test button pressed - using selected Athan from dropdown:",i.selectedAthan);const e=Ce.find((e=>e.id===i.selectedAthan));if(!e)return A("Selected Athan not found. Please choose a different one."),void y(!1);console.log(`Playing test Athan: ${e.name} (${e.url})`),O.current.src=e.url,O.current.preload="auto",O.current.load();let t=0;const n=3,a=()=>{console.log(`Attempting to play test Athan (attempt ${t+1})`),O.current.play().then((()=>{m(!0),y(!1),console.log("Test Athan playing successfully")})).catch((e=>{console.error(`Error playing test Athan (attempt ${t+1}):`,e),t++,t<n?setTimeout(a,1e3):(m(!1),y(!1),A(`Unable to play audio after ${n} attempts. Please check your connection or try another Athan.`),se())}))};a()}},disabled:g,sx:{borderRadius:4},children:u?"Stop":"Test Athan"}),(0,B.jsx)(ge.A,{title:i.notificationsEnabled?"Notifications enabled":"granted"===Z?"Enable notifications":"Click to enable notifications",children:(0,B.jsxs)("span",{children:[" ",(0,B.jsx)(ye.A,{color:i.notificationsEnabled?"primary":"default",onClick:async()=>{if(i.notificationsEnabled)return void r((e=>({...e,notificationsEnabled:!1})));const e=Notification.permission;if(X(e),"granted"===e)r((e=>({...e,notificationsEnabled:!0}))),$("Notifications enabled"),T(!0);else{if(!await ie()){const e=await ne();$(e?"In private browsing: please use the notification icon in your address bar":"Permission not granted. Check your browser settings or try again."),T(!0)}}},sx:{border:i.notificationsEnabled?`1px solid ${e.palette.primary.main}`:"none",opacity:"denied"===Z?.7:1},disabled:!1,children:i.notificationsEnabled?(0,B.jsx)(Ie.A,{}):(0,B.jsx)(Pe.A,{})})]})})]}),i.notificationsEnabled&&"granted"!==Z&&(0,B.jsx)(l.A,{severity:"warning",variant:"outlined",sx:{mb:2,borderRadius:2},action:(0,B.jsxs)(xe.A,{direction:"row",spacing:1,children:[(0,B.jsx)(c.A,{color:"warning",size:"small",variant:"contained",onClick:async()=>{if(!await ie()){const e=(()=>{const e=navigator.userAgent;let t="Unknown";return e.indexOf("Firefox")>-1?t="Firefox":e.indexOf("Edge")>-1?t="Edge":e.indexOf("Chrome")>-1?t="Chrome":e.indexOf("Safari")>-1?t="Safari":e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?t="Opera":(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1)&&(t="Internet Explorer"),{name:t}})();let t="You'll need to enable notifications in your browser settings.";"Chrome"===e.name||"Edge"===e.name?t+=" Look for the notification icon in your address bar.":"Firefox"===e.name?t+=" Click the lock icon in the address bar and select permissions.":"Safari"===e.name&&(t+=" Check Safari > Preferences > Websites > Notifications."),$(t),T(!0)}},children:"Enable"}),(0,B.jsx)(c.A,{size:"small",color:"inherit",onClick:()=>{r((e=>({...e,notificationsEnabled:!1})))},children:"Disable"})]}),children:(0,B.jsxs)(s.A,{children:[(0,B.jsx)("strong",{children:"Browser notifications are blocked."})," Prayer reminders won't work until you allow notifications.",ne()&&(0,B.jsx)(s.A,{component:"span",sx:{display:"block",mt:.5},children:(0,B.jsx)("em",{children:"Note: You appear to be in private browsing mode, which may limit notification permissions."})})]})}),(0,B.jsxs)(V.A,{variant:"outlined",sx:{mb:3,px:2,py:1.5,borderRadius:2,display:"flex",alignItems:"center"},children:[(0,B.jsx)(ye.A,{sx:{mr:1},children:0===i.volume?(0,B.jsx)(ke.A,{}):i.volume<50?(0,B.jsx)(Se.A,{}):(0,B.jsx)(we.A,{})}),(0,B.jsx)(fe.Ay,{value:i.volume,onChange:(e,t)=>{r((e=>({...e,volume:t})))},"aria-labelledby":"volume-slider",valueLabelDisplay:"auto",disabled:!i.athanEnabled})]}),(0,B.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Settings"}),(0,B.jsxs)(I.A,{fullWidth:!0,sx:{mb:2},children:[(0,B.jsx)(q.A,{id:"athan-select-label",children:"Athan Voice"}),(0,B.jsx)(H.A,{labelId:"athan-select-label",id:"athan-select",value:i.selectedAthan,label:"Athan Voice",onChange:e=>{r((t=>({...t,selectedAthan:e.target.value})))},disabled:!i.athanEnabled,children:Ce.map((e=>(0,B.jsx)(G.A,{value:e.id,children:e.name},e.id)))}),(0,B.jsx)(Ae.A,{children:"Note: For Fajr prayer, Mansour Zahrani Fajr will automatically be used."})]}),(0,B.jsxs)(I.A,{fullWidth:!0,sx:{mb:2},children:[(0,B.jsx)(q.A,{id:"notification-time-label",children:"Notification before prayer"}),(0,B.jsxs)(H.A,{labelId:"notification-time-label",id:"notification-time",value:i.preAthanNotification,label:"Notification before prayer",onChange:e=>{r((t=>({...t,preAthanNotification:Number(e.target.value)})))},disabled:!i.notificationsEnabled,children:[(0,B.jsx)(G.A,{value:5,children:"5 minutes"}),(0,B.jsx)(G.A,{value:10,children:"10 minutes"}),(0,B.jsx)(G.A,{value:15,children:"15 minutes"}),(0,B.jsx)(G.A,{value:20,children:"20 minutes"}),(0,B.jsx)(G.A,{value:30,children:"30 minutes"})]})]}),(0,B.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Play Athan for:"}),(0,B.jsx)(je.A,{sx:{mb:2},children:(0,B.jsx)(xe.A,{direction:"row",flexWrap:"wrap",children:Object.keys(i.selectedPrayers).map((e=>(0,B.jsx)(p.A,{control:(0,B.jsx)(be.A,{checked:i.selectedPrayers[e],onChange:()=>(e=>{r((t=>({...t,selectedPrayers:{...t.selectedPrayers,[e]:!t.selectedPrayers[e]}})))})(e),disabled:!i.athanEnabled}),label:e},e)))})}),!1,(0,B.jsxs)(s.A,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",mt:2},children:["Audio files provided by ",(0,B.jsx)(ve.A,{href:"https://praytimes.org/audio/",target:"_blank",rel:"noopener",children:"Praytimes.org"})," API"]}),(0,B.jsx)(j.A,{open:C,autoHideDuration:6e3,onClose:()=>{T(!1),_(null)},children:L?(0,B.jsx)(l.A,{severity:"info",action:L,onClose:()=>T(!1),children:D}):(0,B.jsx)(l.A,{severity:"info",onClose:()=>T(!1),children:D})})]})})};var $e=n(9280),Re=n(5465),Fe=n(6093),ze=n(889),We=n(6605),Le=n(710),_e=n(1337);const Be=()=>{const{settings:e,updateSettings:t}=(0,a.useContext)(Fe.zb),n=[{id:"fajr",name:"Fajr",defaultMinutes:20,minMinutes:5,maxMinutes:60},{id:"dhuhr",name:"Dhuhr",defaultMinutes:10,minMinutes:5,maxMinutes:30},{id:"asr",name:"Asr",defaultMinutes:10,minMinutes:5,maxMinutes:30},{id:"maghrib",name:"Maghrib",defaultMinutes:10,minMinutes:5,maxMinutes:30},{id:"isha",name:"Isha",defaultMinutes:10,minMinutes:5,maxMinutes:30}],i=t=>{var a,i;return(null===(a=e.customReminderTimes)||void 0===a?void 0:a[t])||(null===(i=n.find((e=>e.id===t)))||void 0===i?void 0:i.defaultMinutes)||10};return(0,B.jsx)(o.A,{sx:{mt:3},children:(0,B.jsxs)(ze.A,{children:[(0,B.jsx)(We.A,{expandIcon:(0,B.jsx)(_e.A,{}),"aria-controls":"personalized-reminders-content",id:"personalized-reminders-header",sx:{bgcolor:e.customRemindersEnabled?"primary.50":"inherit","&.Mui-expanded":{bgcolor:e.customRemindersEnabled?"primary.50":"inherit"}},children:(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(ce.A,{sx:{mr:1,color:"primary.main"}}),(0,B.jsx)(s.A,{children:"Personalized Prayer Reminders"})]})}),(0,B.jsxs)(Le.A,{children:[(0,B.jsx)(p.A,{control:(0,B.jsx)(x.A,{checked:e.customRemindersEnabled,onChange:e=>{t({customRemindersEnabled:e.target.checked})},color:"primary"}),label:"Enable pre-prayer reminders",sx:{mb:2,display:"block"}}),e.customRemindersEnabled&&(0,B.jsx)(d.Ay,{container:!0,spacing:2,children:n.map((n=>(0,B.jsxs)(d.Ay,{item:!0,xs:12,children:[(0,B.jsxs)(s.A,{id:`${n.id}-reminder-slider`,gutterBottom:!0,children:[n.name," prayer reminder: ",i(n.id)," minutes before"]}),(0,B.jsx)(fe.Ay,{value:i(n.id),onChange:(a,i)=>((n,a)=>{t({customReminderTimes:{...e.customReminderTimes,[n]:a}})})(n.id,i),"aria-labelledby":`${n.id}-reminder-slider`,valueLabelDisplay:"auto",step:5,marks:[{value:n.minMinutes,label:`${n.minMinutes}m`},{value:n.defaultMinutes,label:`${n.defaultMinutes}m`},{value:n.maxMinutes,label:`${n.maxMinutes}m`}],min:n.minMinutes,max:n.maxMinutes})]},n.id)))})]})]})})},Oe=()=>{const{settings:e,updateSettings:t,requestNotificationPermission:n,playAthan:i,stopAthan:r,availableAthans:d,availableFajrAthans:u}=(0,a.useContext)(Fe.zb),[m,h]=(0,a.useState)(null),[g,y]=(0,a.useState)(!1),f=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.playingAudio?r():i(t)};return(0,B.jsxs)(V.A,{elevation:2,sx:{p:3,borderRadius:2,mb:3},children:[(0,B.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,B.jsxs)(s.A,{variant:"h5",component:"h2",gutterBottom:!0,sx:{display:"flex",alignItems:"center",mb:0},children:[(0,B.jsx)(Ie.A,{sx:{mr:1}}),"Athan Settings"]}),(0,B.jsx)(ge.A,{title:"Athan will play automatically at prayer times. Browser notifications will appear if you allow them.",children:(0,B.jsx)(ye.A,{size:"small",children:(0,B.jsx)(Re.A,{fontSize:"small"})})})]}),(0,B.jsx)(ne.A,{sx:{my:2}}),(0,B.jsx)(p.A,{control:(0,B.jsx)(x.A,{checked:e.enabled,onChange:async a=>{if(a.target.checked){if(t({enabled:!0}),!e.notificationsEnabled){const e=await n();h(e.message),y(!0)}}else t({enabled:!1,notificationsEnabled:!1})},color:"primary"}),label:(0,B.jsxs)(o.A,{component:"span",sx:{display:"flex",alignItems:"center"},children:["Enable Athan",e.notificationsEnabled&&(0,B.jsx)(o.A,{component:"span",sx:{ml:1,fontSize:"0.75rem",bgcolor:"success.main",color:"white",py:.25,px:1,borderRadius:1},children:"With Notifications"})]}),sx:{mb:2,display:"block"}}),e.enabled&&(0,B.jsxs)(o.A,{sx:{pl:1},children:[(0,B.jsx)(p.A,{control:(0,B.jsx)(x.A,{checked:e.specialFajrAthan,onChange:e=>t({specialFajrAthan:e.target.checked}),color:"primary"}),label:"Use Special Fajr Athan",sx:{mb:3,display:"block"}}),(0,B.jsxs)(o.A,{sx:{mb:3},children:[(0,B.jsx)(s.A,{id:"athan-volume-slider",gutterBottom:!0,children:"Athan Volume"}),(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(Se.A,{sx:{mr:1}}),(0,B.jsx)(fe.Ay,{value:e.volume,onChange:(e,n)=>{t({volume:n})},"aria-labelledby":"athan-volume-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:0,max:100,sx:{mx:1}}),(0,B.jsx)(we.A,{sx:{ml:1}})]})]}),(0,B.jsxs)(I.A,{fullWidth:!0,sx:{mb:3},children:[(0,B.jsx)(P.A,{children:"Regular Athan Sound"}),(0,B.jsx)(H.A,{value:(()=>{const t=d.find((t=>t.url===e.athanPath));return t?t.id:"makkah"})(),onChange:e=>{const n=d.find((t=>t.id===e.target.value));n&&t({athanPath:n.url})},size:"small",sx:{mt:1},children:d.map((e=>(0,B.jsx)(G.A,{value:e.id,children:e.name},e.id)))}),(0,B.jsx)(o.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:(0,B.jsx)(c.A,{variant:"outlined",size:"small",startIcon:e.playingAudio&&!e.specialFajrAthan?(0,B.jsx)($e.A,{}):(0,B.jsx)(Me.A,{}),onClick:()=>f(!1),sx:{minWidth:100},children:e.playingAudio&&!e.specialFajrAthan?"Stop":"Test"})})]}),e.specialFajrAthan&&(0,B.jsxs)(I.A,{fullWidth:!0,sx:{mb:3},children:[(0,B.jsx)(P.A,{children:"Fajr Athan Sound"}),(0,B.jsx)(H.A,{value:(()=>{const t=u.find((t=>t.url===e.fajrAthanPath));return t?t.id:"mansour-fajr"})(),onChange:e=>{const n=u.find((t=>t.id===e.target.value));n&&t({fajrAthanPath:n.url})},size:"small",sx:{mt:1},children:u.map((e=>(0,B.jsx)(G.A,{value:e.id,children:e.name},e.id)))}),(0,B.jsx)(o.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:(0,B.jsx)(c.A,{variant:"outlined",size:"small",startIcon:e.playingAudio&&e.specialFajrAthan?(0,B.jsx)($e.A,{}):(0,B.jsx)(Me.A,{}),onClick:()=>f(!0),sx:{minWidth:100},children:e.playingAudio&&e.specialFajrAthan?"Stop":"Test"})})]}),(0,B.jsx)(Be,{}),(0,B.jsxs)(l.A,{severity:"info",variant:"outlined",sx:{mt:2},children:["Athan will play automatically at prayer times even when browsing other pages.",!e.notificationsEnabled&&(0,B.jsx)(o.A,{sx:{mt:1},children:(0,B.jsx)(c.A,{size:"small",color:"info",variant:"contained",onClick:async()=>{const e=await n();h(e.message),y(!0)},children:"Enable Browser Notifications"})})]})]}),(0,B.jsx)(j.A,{open:g,autoHideDuration:6e3,onClose:()=>y(!1),message:m})]})},qe=()=>{const[e,t]=(0,a.useState)("clocks"),[n,S]=(0,a.useState)(!1),[k,M]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),[P,N]=(0,a.useState)((()=>"true"===localStorage.getItem("keepPrayerTimesActive"))),[C,T]=(0,a.useState)(!1),[D,$]=(0,a.useState)(""),R=(0,a.useRef)(null),F=(0,a.useRef)(null),z=(0,a.useRef)(null),W=(0,a.useRef)(null),L=(0,a.useRef)(Date.now()),_=(0,a.useRef)({}),q=(0,a.useRef)(null),H=(0,a.useRef)(null),{prayerTimes:G,loading:J,error:V,params:Y,updateParams:K,fetchPrayerTimesByCoordinates:Q,fetchPrayerTimesByAddress:Z,locationRequested:X}=(0,v.xn)(),{location:ee,error:ne,loading:ae,getCurrentPosition:ie,permissionState:re,DEFAULT_LOCATION:oe}=(0,w.A)(),se=(0,a.useMemo)((()=>J||ae||k),[J,ae,k]);(0,a.useEffect)((()=>("serviceWorker"in navigator&&(navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("Service Worker registered:",e),z.current=e,navigator.serviceWorker.addEventListener("message",ce)})).catch((e=>{console.error("Service Worker registration failed:",e)})),"Notification"in window&&Notification.requestPermission().then((e=>{"granted"===e&&console.log("Notification permission granted")}))),()=>{navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",ce)})),[]);const ce=e=>{var t;e.data&&"PRAYER_NOTIFICATION_CLICK"===e.data.type&&(console.log("Notification clicked for prayer:",e.data.prayer),Y.latitude&&Y.longitude&&Q({latitude:Y.latitude,longitude:Y.longitude}),W.current&&(null===(t=H.current)||void 0===t?void 0:t.name)===e.data.prayer&&ye(e.data.prayer))};(0,a.useEffect)((()=>{X||"prompt"!==re||S(!0)}),[X,re]),(0,a.useEffect)((()=>{if(!ee||k||J)return;const e=`${ee.latitude},${ee.longitude}`;R.current!==e&&(R.current=e,M(!0),K({latitude:ee.latitude,longitude:ee.longitude,address:ee.name||`${ee.latitude.toFixed(4)}, ${ee.longitude.toFixed(4)}`}),Q({latitude:ee.latitude,longitude:ee.longitude}).finally((()=>{M(!1)})))}),[ee,Q,K,k,J]),(0,a.useEffect)((()=>{if(G&&G.length>0&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:"PRAYER_TIMES_UPDATE",prayerTimes:G}),F.current&&F.current.postMessage({command:"updatePrayerTimes",prayerTimes:G});const e=new Date;H.current=G.find((t=>new Date(t.dateTime)>e))}}),[G]);const de=()=>{K({latitude:oe.latitude,longitude:oe.longitude,address:oe.name}),Q({latitude:oe.latitude,longitude:oe.longitude}),S(!1)},ue=(0,a.useMemo)((()=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(pe,{}),(0,B.jsx)(De,{ref:W}),(0,B.jsx)(le,{})]})),[]),me=(0,a.useMemo)((()=>(0,B.jsx)(te,{prayerTimes:G||{},loading:se})),[G,se]);(0,a.useEffect)((()=>{F.current=new Worker("/timer.worker.js"),F.current.onmessage=e=>{const{type:t}=e.data;"prayerUpdate"===t?H.current={name:e.data.nextPrayer,minutesRemaining:e.data.minutesRemaining}:"athanTime"===t?(console.log(`It's time for ${e.data.prayer} prayer!`),ye(e.data.prayer),fe(e.data.prayer)):"showNotification"===t?fe(e.data.prayer,e.data.title,e.data.body):"wakeup"===t?(console.log("Received wakeup signal for prayer:",e.data.prayer),ve(),Ae(e.data)):"pong"===t&&(L.current=Date.now())};const e=e=>{if("athanSettings"===e.key)try{const t=JSON.parse(e.newValue);_.current=t,F.current&&F.current.postMessage({command:"updateSettings",athanSettings:t})}catch(t){console.error("Error parsing Athan settings:",t)}};try{const e=localStorage.getItem("athanSettings");e&&(_.current=JSON.parse(e))}catch(t){console.error("Error loading initial Athan settings:",t)}return window.addEventListener("storage",e),F.current.postMessage({command:"ping"}),()=>{F.current&&(F.current.postMessage({command:"stop"}),F.current.terminate()),q.current&&clearTimeout(q.current),window.removeEventListener("storage",e)}}),[]),(0,a.useEffect)((()=>{localStorage.setItem("keepPrayerTimesActive",P),P?(he(),$("Prayer times will stay active in the background"),T(!0)):xe()}),[P]),(0,a.useEffect)((()=>{const e=()=>{"visible"===document.visibilityState?(console.log("Page is now visible"),P&&F.current&&(be(),ve())):console.log("Page is now hidden")};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[P]);const he=()=>{F.current&&(F.current.postMessage({command:"start",interval:1e3,prayerTimes:G,athanSettings:_.current}),je()),ge()},xe=()=>{F.current&&F.current.postMessage({command:"stop"})},ge=()=>{"Notification"in window&&"granted"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e?(console.log("Notification permission granted"),$("Notifications enabled for prayer times"),T(!0)):(console.log("Notification permission denied"),$("Please enable notifications for prayer time alerts"),T(!0))}))},ye=e=>{if(W.current&&W.current.playAthan)return"Fajr"===e?W.current.playAthan("Fajr"):W.current.playAthan("default"),!0;try{let t;const n=_.current;t="Fajr"===e?new Audio("/audio/athan/Fajr.mp3"):n&&n.athanSound?new Audio(`/audio/athan/${n.athanSound}.mp3`):new Audio("/audio/athan/default.mp3"),t.onerror=e=>{console.error("Error playing Athan audio:",e),"/audio/athan/default.mp3"!==t.src&&(t.src="/audio/athan/default.mp3",t.play().catch((e=>console.error("Failed to play fallback Athan:",e))))},t.play().then((()=>(console.log(`Playing Athan for ${e} prayer`),!0))).catch((e=>(console.error("Failed to play Athan:",e),!1)))}catch(t){return console.error("Error setting up Athan audio:",t),!1}},fe=(e,t,n)=>{if(!("Notification"in window)||"granted"!==Notification.permission)return;const a=t||`Time for ${e} Prayer`,i=n||`It's time to pray ${e}`;z.current?z.current.showNotification(a,{body:i,icon:"/favicon.svg",badge:"/favicon.svg",tag:"prayer-time",renotify:!0,vibrate:[200,100,200],data:{url:"/",prayer:e}}).catch((e=>{console.error("Error showing notification through service worker:",e),new Notification(a,{body:i,icon:"/favicon.svg"})})):new Notification(a,{body:i,icon:"/favicon.svg"})},Ae=e=>{q.current&&clearTimeout(q.current);const t=new Date(e.dateTime)-new Date;if(t>0&&t<6e5){console.log(`Scheduling wakeup for ${e.prayer} in ${Math.floor(t/1e3)} seconds`);const n=Math.max(0,t-1e4);q.current=setTimeout((()=>{ve(),ye(e.prayer)}),n)}},je=()=>{const e=setInterval((()=>{P?be():clearInterval(e)}),6e4);return()=>clearInterval(e)},be=()=>{F.current&&(F.current.postMessage({command:"ping"}),setTimeout((()=>{Date.now()-L.current>12e4&&(console.warn("Worker seems unresponsive, restarting..."),F.current&&F.current.terminate(),F.current=new Worker("/timer.worker.js"),he())}),5e3))},ve=()=>{Y.latitude&&Y.longitude&&!J&&(console.log("Refreshing prayer times"),Q({latitude:Y.latitude,longitude:Y.longitude}),localStorage.setItem("lastPrayerTimesRefresh",(new Date).toISOString()))};return(0,B.jsxs)(r.A,{maxWidth:"lg",sx:{py:4},children:[(0,B.jsxs)(i.mg,{children:[(0,B.jsx)("title",{children:"Accurate Prayer Times - iMuslim Life"}),(0,B.jsx)("meta",{name:"description",content:"Get accurate Islamic prayer times (Salat) for any location worldwide. Supports multiple calculation methods, Asr juristic methods, and high latitude adjustments."}),(0,B.jsx)("meta",{name:"keywords",content:"prayer times, salat times, islamic prayer times, muslim prayer, fajr, dhuhr, asr, maghrib, isha, calculation methods"}),(0,B.jsx)("meta",{property:"og:title",content:"Accurate Prayer Times - iMuslim Life"}),(0,B.jsx)("meta",{property:"og:description",content:"Get accurate Islamic prayer times (Salat) for any location worldwide. Supports multiple calculation methods and adjustments."}),(0,B.jsx)("link",{rel:"canonical",href:"https://imuslimlife.com/#/prayer-times"})]}),(0,B.jsxs)(o.A,{sx:{py:4},children:[(0,B.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"primary.main"},children:"Prayer Times"}),V&&(0,B.jsx)(l.A,{severity:"error",sx:{mb:3},children:V}),ne&&!ee&&(0,B.jsx)(l.A,{severity:"info",sx:{mb:3},action:(0,B.jsx)(c.A,{color:"inherit",size:"small",onClick:()=>{navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:"geolocation"}).then((e=>{"denied"===e.state?I(!0):ie()})):ie()},children:"Enable Location"}),children:"Using default location (Orlando, FL). For the most accurate prayer times, please enable location access."}),(0,B.jsxs)(d.Ay,{container:!0,spacing:4,children:[(0,B.jsxs)(d.Ay,{item:!0,xs:12,md:4,children:[(0,B.jsx)(O,{onSubmit:e=>{k||J||("coordinates"===e.type?Q({latitude:e.data.latitude,longitude:e.data.longitude,date:e.date}):Z(e.data.address,{date:e.date}))}}),(0,B.jsx)(o.A,{sx:{mt:3},children:(0,B.jsx)(U,{onSubmit:e=>{if(k||J)return;const t={...e};Y.latitude&&Y.longitude?Q({...t,latitude:Y.latitude,longitude:Y.longitude}):Y.address&&Z(Y.address,t)}})})]}),(0,B.jsxs)(d.Ay,{item:!0,xs:12,md:8,children:[(0,B.jsxs)(u.A,{value:e,onChange:(e,n)=>t(n),sx:{mb:3},children:[(0,B.jsx)(m.A,{value:"clocks",label:"Clock View"}),(0,B.jsx)(m.A,{value:"table",label:"Table View"})]}),se&&!G?(0,B.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",my:4},children:[(0,B.jsx)(h.A,{}),(0,B.jsx)(s.A,{variant:"body1",sx:{ml:2},children:ae?"Getting your location...":"Loading prayer times..."})]}):"clocks"===e?ue:me]})]})]}),(0,B.jsx)(o.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,B.jsx)(p.A,{control:(0,B.jsx)(x.A,{checked:P,onChange:e=>N(e.target.checked),color:"primary"}),label:"Keep prayer times active in background"})}),(0,B.jsx)(Oe,{}),(0,B.jsxs)(g.A,{open:n,onClose:de,disableEscapeKeyDown:!0,children:[(0,B.jsx)(y.A,{children:(0,B.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(b.A,{sx:{mr:1,color:"primary.main"}}),"Allow Location Access"]})}),(0,B.jsxs)(f.A,{children:[(0,B.jsx)(s.A,{paragraph:!0,children:"Salat-e-Mustaqeem needs your location to provide accurate prayer times for where you are."}),(0,B.jsx)(s.A,{paragraph:!0,children:'When prompted by your browser, please click "Allow" to share your location.'}),(0,B.jsx)(s.A,{paragraph:!0,sx:{fontStyle:"italic",color:"text.secondary"},children:"If you don't allow location access, we'll use Orlando, Florida as the default location. You can always manually enter your location."})]}),(0,B.jsxs)(A.A,{children:[(0,B.jsx)(c.A,{onClick:de,children:"Use Default Location"}),(0,B.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>{ie(),S(!1)},startIcon:(0,B.jsx)(b.A,{}),children:"Allow Location Access"})]})]}),(0,B.jsxs)(g.A,{open:E,onClose:()=>I(!1),children:[(0,B.jsx)(y.A,{children:"Enable Location Access"}),(0,B.jsxs)(f.A,{children:[(0,B.jsx)(s.A,{paragraph:!0,children:"You previously denied location access. To enable it:"}),(0,B.jsx)(s.A,{component:"div",paragraph:!0,children:(0,B.jsxs)("ol",{children:[(0,B.jsx)("li",{children:"Click on the lock/info icon in your browser's address bar"}),(0,B.jsx)("li",{children:'Find "Location" or "Site settings"'}),(0,B.jsx)("li",{children:'Change from "Block" to "Allow"'}),(0,B.jsx)("li",{children:"Refresh this page"})]})}),(0,B.jsx)(s.A,{paragraph:!0,sx:{fontStyle:"italic"},children:"Instructions may vary depending on your browser."})]}),(0,B.jsx)(A.A,{children:(0,B.jsx)(c.A,{onClick:()=>I(!1),children:"OK, Got It"})})]}),(0,B.jsx)(j.A,{open:C,autoHideDuration:6e3,onClose:()=>T(!1),message:D})]})}},7072:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(5043);const i={latitude:28.5383,longitude:-81.3792,name:"Orlando, FL (Default)"},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,a.useState)(null),[r,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)("prompt"),u=(0,a.useRef)(!1),[m,h]=(0,a.useState)(!1),p=(0,a.useCallback)((e=>{l(!1),o(null),u.current=!1,n({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp}),d("granted")}),[]),x=(0,a.useCallback)((e=>{l(!1),u.current=!1,o(e.message),e.code===e.PERMISSION_DENIED&&d("denied"),console.log("Geolocation error:",e,"Using default location"),n(i)}),[]),g=(0,a.useCallback)((()=>{if(u.current)console.log("Location request already in progress");else{if(h(!0),!navigator.geolocation)return o("Geolocation is not supported by your browser"),void n(i);l(!0),u.current=!0,navigator.geolocation.getCurrentPosition(p,x,e)}}),[x,p,e]);return(0,a.useEffect)((()=>{navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then((e=>{d(e.state),e.addEventListener("change",(()=>{d(e.state)}))}))}),[]),(0,a.useEffect)((()=>{"granted"!==c||t||m?"denied"!==c||t||n(i):g()}),[c,t,g,m]),{location:t,error:r,loading:s,getCurrentPosition:g,permissionState:c,DEFAULT_LOCATION:i}}}}]);
//# sourceMappingURL=63.5272b110.chunk.js.map